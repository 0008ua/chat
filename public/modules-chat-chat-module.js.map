{"version":3,"sources":["./src/app/modules/chat/chat-routing.module.ts","./src/app/modules/chat/chat.component.ts","./src/app/modules/chat/chat.component.html","./src/app/modules/chat/chat.module.ts"],"names":[],"mappings":"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","file":"modules-chat-chat-module.js","sourcesContent":["import { CommonModule } from '@angular/common';\r\nimport { ChatComponent } from './chat.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '',\r\n        component: ChatComponent,\r\n    },\r\n    // {\r\n    //   path: '**',\r\n    //   redirectTo: '',\r\n    //   pathMatch: 'full',\r\n    // },\r\n];\r\n\r\n@NgModule({\r\n    imports: [\r\n        RouterModule.forChild(routes),\r\n        CommonModule,\r\n    ],\r\n    exports: [RouterModule],\r\n})\r\nexport class ChatRoutingModule { }\r\n","import { switchMap, tap } from 'rxjs/operators';\r\nimport { getActiveContact, getActiveContactMsgs, getContacts, getUserRooms } from './../../store/reducers/socket.reducer';\r\nimport { Contact, Message, Room } from 'src/app/interfaces';\r\nimport { LoginAnonymous } from './../../store/actions/user.actions';\r\nimport { GetMessages, GetMessagesSuccess, ActiveSockets, GetUserRooms, UpdateContacts, GetActiveContactMsgs, GetActiveContactMsgsSuccess } from './../../store/actions/socket.actions';\r\nimport { fromEvent, Observable } from 'rxjs';\r\nimport { Msg, User, ActiveSocket } from './../../interfaces';\r\nimport { SocketService } from './../../services/socket.service';\r\nimport { State } from './../../store/reducers/index';\r\nimport { UserService } from './../../services/user.service';\r\nimport { Component, OnInit, ViewChild, ElementRef, AfterViewInit, AfterViewChecked, HostListener } from '@angular/core';\r\nimport { Logout } from 'src/app/store/actions/user.actions';\r\nimport { Store } from '@ngrx/store';\r\nimport { getMsgs } from '../../store/reducers/socket.reducer';\r\nimport { getUser } from 'src/app/store/reducers/user.reducer';\r\n\r\n@Component({\r\n    selector: 'app-chat',\r\n    templateUrl: './chat.component.html',\r\n    styleUrls: ['./chat.component.scss'],\r\n})\r\nexport class ChatComponent implements OnInit, AfterViewChecked, AfterViewInit {\r\n    textValidation: boolean = false;\r\n    nameValidation: boolean = false;\r\n    msgs: Msg[] = [];\r\n    contacts: Contact[] = [];\r\n    userRooms: Room[];\r\n    activeContact: Contact;\r\n\r\n    @ViewChild('chatMessages', { static: false }) chatMessages: ElementRef;\r\n    @ViewChild('inpMsg', { static: true }) inpMsg: ElementRef;\r\n    @ViewChild('inpName', { static: false }) inpName: ElementRef;\r\n\r\n    inpMsgEvent$: Observable<InputEvent>;\r\n    inpNameEvent$: Observable<InputEvent>;\r\n    user: User;\r\n\r\n    constructor(\r\n        private store: Store<State>,\r\n        private socketService: SocketService,\r\n        private userService: UserService,\r\n    ) { }\r\n\r\n    @HostListener('keydown', ['$event'])\r\n    onPress(e: KeyboardEvent) {\r\n        if (e.key === 'Enter' && e.target === (this.inpMsg.nativeElement) as HTMLElement) {\r\n            this.send();\r\n        }\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.store.select(getUser)\r\n\r\n            .subscribe((user) => {\r\n                if ((user && !this.user) || (user && this.user && this.user._id !== user._id)) {\r\n                    // dispatch action only on user logged in\r\n                    this.store.dispatch(new GetUserRooms());\r\n                }\r\n                this.user = user;\r\n            });\r\n\r\n        this.store.select(getUserRooms)\r\n            .subscribe((userRooms) => this.userRooms = userRooms);\r\n\r\n        // get messages from server\r\n        // this.store.dispatch(new GetMessages());\r\n\r\n        // on changes messages state\r\n        this.store.select(getActiveContactMsgs)\r\n            .subscribe((msgs) => this.msgs = msgs);\r\n\r\n        this.store.select(getActiveContact)\r\n            .subscribe((activeContact) => this.activeContact = activeContact);\r\n\r\n        this.socketService.onSocketEvent('msg')\r\n            .pipe(tap((msg) => console.log('msg', msg)))\r\n\r\n            .subscribe((msg) => this.store.dispatch(new GetMessagesSuccess({ msgs: [msg] })));\r\n\r\n        this.store.select(getContacts)\r\n            .subscribe((contacts) => {\r\n                this.contacts = contacts;\r\n            });\r\n            \r\n        this.socketService.onSocketEvent('activeSockets')\r\n            .subscribe((activeSockets) => {\r\n                activeSockets = activeSockets.filter((socket: ActiveSocket) => socket.user_id !== this.user._id);\r\n                this.store.dispatch(new ActiveSockets({activeSockets}));\r\n            });\r\n\r\n        this.socketService.onSocketEvent('joinedRoom')\r\n            .subscribe((room_id) => {\r\n                console.log('joinedRoom', room_id);\r\n                this.store.dispatch(new GetUserRooms());\r\n            });\r\n\r\n        // this.socketService.onSocketEvent('connected')\r\n        //     .subscribe((data) => console.log('socket connected', data));\r\n\r\n\r\n        // this.socketService.onSocketEvent('requestForChat')\r\n        //     .subscribe((data) => this.store.dispatch(new GetMessagesSuccess([{ ...data, direction: 'in' }])));\r\n        this.socketService.onSocketEvent('connect_error')\r\n            .subscribe((data) => console.log('socket connect_error', data));\r\n\r\n        this.inpMsgEvent$ = fromEvent(this.inpMsg.nativeElement, 'input');\r\n\r\n        this.inpMsgEvent$\r\n            .subscribe((inputEvent: InputEvent) => {\r\n                if (!this.inpMsg.nativeElement.value) {\r\n                    this.textValidation = false;\r\n                } else {\r\n                    this.textValidation = true;\r\n                }\r\n            });\r\n    }\r\n\r\n    loginAnonymous() {\r\n        const name = this.inpName.nativeElement.value;\r\n        this.store.dispatch(new LoginAnonymous(name));\r\n        this.inpName.nativeElement.value = '';\r\n        this.nameValidation = false;\r\n\r\n    // this.userService.loginAnonymous(this.inpName.nativeElement.value)\r\n    //     .subscribe((_) => {\r\n    // this.socketService.connect();\r\n    // this.inpName.nativeElement.value = '';\r\n    // this.nameValidation = false;\r\n    // });\r\n    }\r\n\r\n\r\n    ngAfterViewChecked(): void {\r\n        this.scrollTop();\r\n        if (this.inpName) {\r\n            this.inpNameEvent$ = fromEvent(this.inpName.nativeElement, 'input');\r\n\r\n            this.inpNameEvent$\r\n                .subscribe((inputEvent: InputEvent) => {\r\n                    if (!this.inpName.nativeElement.value) {\r\n                        this.nameValidation = false;\r\n                    } else {\r\n                        this.nameValidation = true;\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n\r\n    }\r\n\r\n    joinRoom(requestedUser_id: string) {\r\n        this.socketService.emitSocketEvent('joinRoom', { requestedUser_id });\r\n    }\r\n\r\n    startChat(contact: Contact) {\r\n        this.joinRoom(contact.user_id);\r\n        console.log('contact', contact);\r\n        this.store.dispatch(new GetActiveContactMsgs({activeContact: contact}));\r\n    }\r\n\r\n    logout() {\r\n        this.store.dispatch(new Logout());\r\n    }\r\n\r\n    scrollTop() {\r\n        this.chatMessages.nativeElement.scrollTop = this.chatMessages.nativeElement.scrollHeight;\r\n    }\r\n\r\n    send() {\r\n        if (!this.textValidation) {\r\n            return;\r\n        }\r\n        const text = this.inpMsg.nativeElement.value;\r\n        this.socketService.emitSocketEvent('msg', {text, room_id: this.activeContact.room_id});\r\n        this.inpMsg.nativeElement.value = '';\r\n        this.textValidation = false;\r\n    }\r\n}\r\n","<div class=\"container-fluid text-light bg-dark\">\r\n\r\n  <!-- <div *ngIf=\"!user\" class=\"chat-regular\">\r\n        <div class=\"chat-regular__connect connect text-dark bg-light\">\r\n          <div class=\"connect__item\">\r\n            <input #inpName type=\"text\" class=\"form-control\" placeholder=\"Enter your name\">\r\n            <button class=\"btn btn-danger\" [disabled]=\"!nameValidation\" (click)=\"loginAnonymous()\">connect</button>\r\n          </div>\r\n        </div>\r\n      </div> -->\r\n\r\n  <div class=\"chat-regular\">\r\n    <div *ngIf=\"user\" class=\"chat-regular__contacts\">\r\n      <div class=\"contacts text-dark bg-light\">\r\n        <!-- <div *ngIf=\"activeContact\" class=\"contacts__header\">\r\n          {{activeContact?.userName}}\r\n        </div> -->\r\n        <ng-container *ngIf=\"contacts.length\">\r\n          <div *ngFor=\"let contact of contacts\" (click)=\"startChat(contact)\" class=\"contacts__item\"\r\n            [ngClass]=\"{'contacts__item_active': contact.user_id === activeContact?.user_id}\">\r\n            <i *ngIf=\"contact.userRole !== 'user'\" class=\"bi bi-person-fill pe-2 float-start\"></i>\r\n            <i *ngIf=\"contact.userRole === 'user'\" class=\"bi bi-person-check-fill pe-2 float-start\"></i>\r\n            <span>{{contact.userName}}</span>\r\n            <i *ngIf=\"contact.room_id && !contact.socket_id\" class=\"bi bi-bookmark-fill ps-2 float-end\"></i>\r\n            <i *ngIf=\"!contact.room_id && contact.socket_id\" class=\"bi bi-bookmark-check ps-2 float-end\"></i>\r\n            <i *ngIf=\"contact.room_id && contact.socket_id\" class=\"bi bi-bookmark-check-fill ps-2 float-end\"></i>\r\n          </div>\r\n        </ng-container>\r\n\r\n\r\n      </div>\r\n    </div>\r\n    <div #chatMessages class=\"chat-regular__messages text-dark bg-light\">\r\n      <div class=\"messages\">\r\n\r\n        <div *ngFor=\"let msg of msgs\" class=\"messages__item\"\r\n          [ngClass]=\"[msg.author_id === user?._id ? 'messages__item_out': 'messages__item_in']\">\r\n          {{msg | json}}\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"chat-regular__compose compose\">\r\n      <div class=\"compose__text\">\r\n        <input #inpMsg type=\"text\" class=\"form-control\" placeholder=\"message\">\r\n      </div>\r\n      <div class=\"compose__send compose__send_regular\">\r\n        <button class=\"btn btn-light\" (click)=\"send()\" [disabled]=\"!textValidation\">Send</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n","import { ChatRoutingModule } from './chat-routing.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ChatComponent } from './chat.component';\r\nimport { ChatCompactComponent } from './chat-compact/chat-compact.component';\r\n\r\n\r\n@NgModule({\r\n    declarations: [\r\n        ChatComponent,\r\n        // ChatCompactComponent,\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        ChatRoutingModule,\r\n    ],\r\n    exports: [\r\n        // ChatCompactComponent,\r\n    ],\r\n})\r\n\r\nexport class ChatModule { }\r\n"],"sourceRoot":"webpack:///"}