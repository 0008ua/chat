{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/modules/nav/nav.component.ts","./src/app/modules/nav/nav.component.html","./src/app/modules/nav/nav.module.ts","./src/app/services/auth.guard.ts","./src/app/services/http-interceptor.service.ts","./src/app/services/no-auth.guard.ts","./src/app/services/socket.service.ts","./src/app/services/user.service.ts","./src/app/store/actions/socket.actions.ts","./src/app/store/actions/user.actions.ts","./src/app/store/effects/socket.effects.ts","./src/app/store/effects/user.effects.ts","./src/app/store/reducers/app.reducer.ts","./src/app/store/reducers/index.ts","./src/app/store/reducers/socket.reducer.ts","./src/app/store/reducers/user.reducer.ts","./src/app/store/store.module.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,wE;;;;;;;;;;;;ACZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACK;AACd;AACc;;;AAEvD,MAAM,MAAM,GAAW;IACnB;QACI,IAAI,EAAE,MAAM;QACZ,YAAY,EAAE,GAAG,EAAE,CAAC,4MAAoC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC;QAClF,WAAW,EAAE,CAAC,mEAAW,CAAC;KAC7B;IACD;QACI,IAAI,EAAE,MAAM;QACZ,YAAY,EAAE,GAAG,EAAE,CAAC,4MAAoC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC;QAClF,OAAO,EAAE,CAAC,8DAAS,CAAC;QACpB,WAAW,EAAE,CAAC,8DAAS,CAAC;KAC3B;IACD;QACI,IAAI,EAAE,EAAE;QACR,YAAY,EAAE,GAAG,EAAE,CAAC,4MAAoC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC;KACrF;IACD;QACI,IAAI,EAAE,IAAI;QACV,UAAU,EAAE,EAAE;QACd,SAAS,EAAE,MAAM;KACpB;CACJ,CAAC;AAMK,MAAM,gBAAgB;;+FAAhB,gBAAgB;0JAAhB,gBAAgB,kBAHhB,CAAC,4DAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EAC7B,4DAAY;mIAEb,gBAAgB,uFAFf,4DAAY;6FAEb,gBAAgB;cAJ5B,sDAAQ;eAAC;gBACN,OAAO,EAAE,CAAC,4DAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;gBACvC,OAAO,EAAE,CAAC,4DAAY,CAAC;aAC1B;;;;;;;;;;;;;;AC9BD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwD;AACN;;;;;;AAU3C,MAAM,YAAY;IACrB,YACY,KAAmB,EACnB,WAAwB;QADxB,UAAK,GAAL,KAAK,CAAc;QACnB,gBAAW,GAAX,WAAW,CAAa;IAChC,CAAC;IAEL,QAAQ;QACJ,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,oEAAQ,EAAE,CAAC,CAAC;IACxC,CAAC;;wEARQ,YAAY;4FAAZ,YAAY;QCZzB,qEAAmB;QACnB;QAAA,2EAA+B;QAC/B;;6FDUa,YAAY;cANxB,uDAAS;eAAC;gBACP,QAAQ,EAAE,UAAU;gBACpB,WAAW,EAAE,sBAAsB;gBACnC,SAAS,EAAE,CAAC,sBAAsB,CAAC;aACtC;;;;;;;;;;;;;;AEVD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqD;AACF;AACoB;AACjB;AACI;AACD;AAED;AACT;AACe;AACJ;AACiB;AACE;;;;AAG7E,MAAM,MAAM,GAAmB,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,EAAE,WAAW,EAAE,KAAK,EAAE,EAAE,CAAC;AAuBtE,MAAM,SAAS;;wFAAT,SAAS,cAFN,2DAAY;4IAEf,SAAS,mBARP;QACP,gEAAa;QACb,EAAE,OAAO,EAAE,uEAAiB,EAAE,QAAQ,EAAE,0FAAsB,EAAE,KAAK,EAAE,IAAI,EAAE;KAGhF,YAdQ;YACL,uEAAa;YACb,oEAAgB;YAChB,iEAAS;YACT,2EAAmB,CAAC,QAAQ,CAAC,gBAAgB,EAAE,EAAE,OAAO,EAAE,qEAAW,CAAC,UAAU,EAAE,CAAC;YACnF,kEAAc;YACd,sEAAgB;YAChB,4DAAc,CAAC,OAAO,CAAC,MAAM,CAAC;SACjC;mIASQ,SAAS,mBAnBd,2DAAY,aAGZ,uEAAa;QACb,oEAAgB;QAChB,iEAAS,+EAET,kEAAc;QACd,sEAAgB;6FAWX,SAAS;cArBrB,sDAAQ;eAAC;gBACN,YAAY,EAAE;oBACV,2DAAY;iBACf;gBACD,OAAO,EAAE;oBACL,uEAAa;oBACb,oEAAgB;oBAChB,iEAAS;oBACT,2EAAmB,CAAC,QAAQ,CAAC,gBAAgB,EAAE,EAAE,OAAO,EAAE,qEAAW,CAAC,UAAU,EAAE,CAAC;oBACnF,kEAAc;oBACd,sEAAgB;oBAChB,4DAAc,CAAC,OAAO,CAAC,MAAM,CAAC;iBACjC;gBACD,SAAS,EAAE;oBACP,gEAAa;oBACb,EAAE,OAAO,EAAE,uEAAiB,EAAE,QAAQ,EAAE,0FAAsB,EAAE,KAAK,EAAE,IAAI,EAAE;iBAGhF;gBACD,SAAS,EAAE,CAAC,2DAAY,CAAC;aAC5B;;;;;;;;;;;;;;ACrCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4D;AAEiD;AAExE;AAGyB;;;;;;;;;;ICQtD,wEACE;IAAA;IAAA,uEAC4B;IAAA,+DAAI;IAAA,4DAAI;IACtC;IAAA,4DAAK;;IAFqC,0DAAwB;IAAxB,6IAAwB;;;;IAGlE,wEACE;IAAA;IAAA,uEACsE;IAAA,iEAAM;IAAA,4DAAI;IAClF;IAAA,4DAAK;;IAFqC,0DAAiC;IAAjC,6IAAiC;;;;IAG3E,wEACE;IAAA;IAAA,wEAA0E;IAAnB,wSAAkB;IAAC,iEAAM;IAAA,4DAAI;IACtF;IAAA,4DAAK;;;;IACL,wEACE;IAAA;IAAA,wEAA0E;IAAnB,wSAAkB;IAAC,qEAAU;IAAA,4DAAI;IAC1F;IAAA,4DAAK;;;IACL,yEACE;IAAA;IAAA,mEAAwC;IAAA,uDAC1C;IAAA,4DAAK;;;IADqC,0DAC1C;IAD0C,oGAC1C;;;ADhBD,MAAM,YAAY;IAKrB,YACY,KAAmB,EACnB,WAAwB;QADxB,UAAK,GAAL,KAAK,CAAc;QACnB,gBAAW,GAAX,WAAW,CAAa;IAChC,CAAC;IAEL,QAAQ;QACJ,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,2EAAO,CAAC;aACrB,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC;IAC/C,CAAC;IAED,MAAM;QACF,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QACtB,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;IAC7B,CAAC;IAED,eAAe;QACX,IAAI,CAAC,UAAU,GAAG,IAAI,kDAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,aAAa,EAAE,EAAC,MAAM,EAAE,KAAK,EAAC,CAAC,CAAC;IACtF,CAAC;IAED,MAAM;QACF,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,kEAAM,EAAE,CAAC,CAAC;IACtC,CAAC;;wEA1BQ,YAAY;4FAAZ,YAAY;;;;;;QCfzB,yEACE;QAAA;QAAA,yEACE;QAAA;QAAA,uEAAkD;QAAA,2EAAgB;QAAA,4DAAI;QACtE;QAAA,4EAEE;QAF2C,oIAAS,YAAQ,IAAC;QAE7D;QAAA,qEAAyC;QAC3C;QAAA,4DAAS;QACT;QAAA,6EACE;QAAA;QAAA,yEAEE;QAAA;QAAA,yEACE;QAAA;QAAA,wEAC4B;QAAA,gEAAI;QAAA,4DAAI;QACtC;QAAA,4DAAK;QACL;QACA;QAAA,yGACE;QAGF;QAAA,yGACE;QAGF;QAAA,yGACE;QAEF;QAAA,yGACE;QAEF;QAAA,yGACE;QAEJ;QAAA,4DAAK;QACP;QAAA,4DAAM;QACR;QAAA,4DAAM;QACR;QAAA,4DAAM;QACN;;QAlCiC,0DAAoB;QAApB,6IAAoB;QASH,2DAAoB;QAApB,6IAAoB;QAI1D,0DAAY;QAAZ,0EAAY;QAIZ,0DAAuC;QAAvC,oIAAuC;QAIvC,0DAAsC;QAAtC,mIAAsC;QAGtC,0DAAsC;QAAtC,mIAAsC;QAGtC,0DAAY;QAAZ,0EAAY;;6FDdX,YAAY;cALxB,uDAAS;eAAC;gBACP,QAAQ,EAAE,SAAS;gBACnB,WAAW,EAAE,sBAAsB;gBACnC,SAAS,EAAE,CAAC,sBAAsB,CAAC;aACtC;+KAE+B,aAAa;kBAAxC,uDAAS;mBAAC,eAAe;;;;;;;;;;;;;;AEhB9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACM;AACA;AACA;;AAcxC,MAAM,SAAS;;wFAAT,SAAS;4IAAT,SAAS,kBART;YACL,4DAAY;YACZ,4DAAY;SACf;mIAKQ,SAAS,mBAVd,2DAAY,aAGZ,4DAAY;QACZ,4DAAY,aAGZ,2DAAY;6FAGP,SAAS;cAZrB,sDAAQ;eAAC;gBACN,YAAY,EAAE;oBACV,2DAAY;iBACf;gBACD,OAAO,EAAE;oBACL,4DAAY;oBACZ,4DAAY;iBACf;gBACD,OAAO,EAAE;oBACL,2DAAY;iBACf;aACJ;;;;;;;;;;;;;;AChBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AAOA;AACc;;;;AAKlD,MAAM,SAAS;IAClB,YACY,MAAc,EACd,KAAmB;QADnB,WAAM,GAAN,MAAM,CAAQ;QACd,UAAK,GAAL,KAAK,CAAc;IAC3B,CAAC;IAEL,yCAAyC;IACzC,OAAO,CAAC,KAAY,EAAE,QAAsB;QACxC,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,oEAAO,CAAC,CAAC,IAAI,CAClC,0DAAG,CAAC,CAAC,IAAI,EAAE,EAAE;YACT,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;gBAC1C,OAAO,KAAK,CAAC;aAChB;YACD,OAAO,IAAI,CAAC;QAChB,CAAC,CAAC,EACF,2DAAI,CAAC,CAAC,CAAC,CACV,CAAC;IACN,CAAC;IAED,6DAA6D;IAC7D,yCAAyC;IACzC,WAAW,CAAC,KAA6B,EAAE,KAA0B;QAEjE,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,oEAAO,CAAC,CAAC,IAAI,CAClC,0DAAG,CAAC,CAAC,IAAI,EAAE,EAAE;YACT,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;gBAC1C,OAAO,KAAK,CAAC;aAChB;YACD,OAAO,IAAI,CAAC;QAChB,CAAC,CAAC,CAEL,CAAC;IACN,CAAC;;kEAlCQ,SAAS;4FAAT,SAAS,WAAT,SAAS,mBAFN,MAAM;6FAET,SAAS;cAHrB,wDAAU;eAAC;gBACR,UAAU,EAAE,MAAM;aACrB;;;;;;;;;;;;;;ACZD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AAC+D;AAGrE;AAIoB;;;AAMlD,MAAM,sBAAsB;IAC/B,YACY,KAAmB;QAAnB,UAAK,GAAL,KAAK,CAAc;IAC3B,CAAC;IAEL,SAAS,CAAC,GAAqB,EAAE,IAAiB;QAElD,oBAAoB;QAChB,qBAAqB;QACrB,2BAA2B;QAG3B,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CACxB,0DAAG,CAAC,CAAC,KAAqB,EAAE,EAAE;YAC1B,IAAI,KAAK,YAAY,iEAAY,EAAE;gBAC/B,iCAAiC;gBACjC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,oEAAQ,EAAE,CAAC,CAAC;gBAEpC,qBAAqB;gBACrB,8DAA8D;aACjE;YACD,OAAO,KAAK,CAAC;QACjB,CAAC,CACA,CAAC,CAAC;IACX,CAAC;IAEO,UAAU,CAAC,IAAS;QAC5B;;YAEI;QACA,OAAO,IAAI,CAAC;IAChB,CAAC;;4FA/BQ,sBAAsB;yGAAtB,sBAAsB,WAAtB,sBAAsB,mBAHnB,MAAM;6FAGT,sBAAsB;cAJlC,wDAAU;eAAC;gBACR,UAAU,EAAE,MAAM;aACrB;;;;;;;;;;;;;;ACZD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2C;AAQN;AACoB;;;;;AAKlD,MAAM,WAAW;IACpB,YACY,WAAwB,EACxB,MAAc,EACd,KAAmB;QAFnB,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAQ;QACd,UAAK,GAAL,KAAK,CAAc;IAE3B,CAAC;IAEL,WAAW,CAAE,KAA6B,EAAE,KAA0B;QAElE,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,oEAAO,CAAC,CAAC,IAAI,CAClC,0DAAG,CAAC,CAAC,IAAI,EAAE,EAAE;YACT,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE;gBAC/B,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;gBAC/B,OAAO,KAAK,CAAC;aAChB;YACD,OAAO,IAAI,CAAC;QAChB,CAAC,CAAC,CAEL,CAAC;IACN,CAAC;;sEApBQ,WAAW;8FAAX,WAAW,WAAX,WAAW,mBAFR,MAAM;6FAET,WAAW;cAHvB,wDAAU;eAAC;gBACR,UAAU,EAAE,MAAM;aACrB;;;;;;;;;;;;;;ACbD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2E;AAEhB;AAChB;AACY;AACb;AACN;AAIuB;;;;;AAGpD,MAAM,SAAU,SAAQ,oDAAM;IACjC,YAAY,YAA4B;QACpC,KAAK,CAAC,YAAY,CAAC,CAAC;IACxB,CAAC;CACJ;AAOM,MAAM,aAAa;IAItB,uBAAuB;IACvB,sBAAsB;IACtB,uBAAuB;IAEvB,YACY,MAAc,EACd,KAAmB,EACnB,IAAgB;QAFhB,WAAM,GAAN,MAAM,CAAQ;QACd,UAAK,GAAL,KAAK,CAAc;QACnB,SAAI,GAAJ,IAAI,CAAY;QAExB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,oEAAO,CAAC;aACrB,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC;QAE3C,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,sEAAO,CAAC;aACrB,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC;QAE3C,mEAAmE;QACnE,2BAA2B;QAC3B,sDAAsD;QACtD,IAAI;QACJ,4BAA4B;QAC5B,eAAe;IACnB,CAAC;IAED,WAAW,CAAC,GAAa;QACrB,IAAI,GAAG,EAAE;YACL,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;SAC9B;QACD,OAAO,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IAED,OAAO,CAAC,GAAa;QACjB,IAAI,GAAG,KAAK,OAAO,EAAE;YACjB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC;YAC9B,OAAO;SACV;QACD,IAAI,GAAG,KAAK,MAAM,EAAE;YAChB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC;YAC9B,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,CAAC;YAClC,OAAO;SACV;QACD,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IAED,UAAU,CAAC,GAAa;QACpB,IAAI,GAAG,KAAK,OAAO,EAAE;YACjB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,CAAC;YACjC,OAAO;SACV;QACD,IAAI,GAAG,KAAK,MAAM,EAAE;YAChB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,CAAC;YACjC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,UAAU,EAAE,CAAC;YACrC,OAAO;SACV;QACD,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;IAC7B,CAAC;IAED,aAAa,CAAC,WAAwB,EAAE,GAAa;QACjD,IAAI,GAAG,EAAE;YACL,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,IAAI,CAClD,0DAAG,CAAC,CAAC,IAAa,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;SACrC;QACD,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,IAAI,CAC1C,0DAAG,CAAC,CAAC,IAAa,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;IACtC,CAAC;IAED,eAAe,CAAC,WAAwB,EAAE,UAAmB,EAAE,GAAa;QACxE,IAAI,GAAG,EAAE;YACL,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;YAClD,OAAO;SACV;QACD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;IAC9C,CAAC;IAEO,SAAS,CAAC,GAAY;QAC1B,OAAO,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC,CAAC;IAC7B,CAAC;IAEO,gBAAgB,CAAC,GAAY;QACjC,OAAO,IAAI,SAAS,CAAC,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;IAClE,CAAC;IAED,kDAAkD;IAClD,mBAAmB;IACnB,8BAA8B;IAC9B,yBAAyB;IACzB,2BAA2B;IAC3B,WAAW;IACX,kCAAkC;IAClC,yBAAyB;IACzB,4BAA4B;IAC5B,WAAW;IACX,IAAI;IAEJ,YAAY;QACR,MAAM,WAAW,GAAG;YAChB,OAAO,EAAE,IAAI,gEAAW,CAAC;gBACrB,cAAc,EAAE,kBAAkB;aACrC,CAAC;SACL,CAAC;QAEF,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAChB,2BAA2B,EAC3B,WAAW,CACd,CAAC;IACN,CAAC;IAED,uBAAuB,CAAC,EAAE,cAAc,EAAE,OAAO,EAAE;QAC/C,MAAM,WAAW,GAAG;YAChB,OAAO,EAAE,IAAI,gEAAW,CAAC;gBACrB,cAAc,EAAE,kBAAkB;aACrC,CAAC;YACF,MAAM,EAAE,IAAI,+DAAU,EAAE;iBACnB,GAAG,CAAC,gBAAgB,EAAE,cAAc,CAAC;iBACrC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC;SAC/B,CAAC;QACF,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAChB,oCAAoC,EACpC,WAAW,CACd,CAAC;IACN,CAAC;IAED,8BAA8B;IAC9B,0CAA0C;IAC1C,IAAI;IAEJ,iBAAiB;IACjB,sDAAsD;IACtD,uCAAuC;IACvC,IAAI;IAEJ,iBAAiB;IACjB,4DAA4D;IAC5D,8BAA8B;IAC9B,6CAA6C;IAC7C,0BAA0B;IAC1B,eAAe;IACf,IAAI;IAEJ,wCAAwC;IACxC,2DAA2D;IAC3D,iGAAiG;IACjG,SAAS;IACT,IAAI;IAEJ,IAAI;QACA,OAAO,+CAAM,EAAE,CAAC;IACpB,CAAC;IAED,cAAc,CAAC,IAAY;QACvB,OAAO;YACH,IAAI;SAKP,CAAC;IACN,CAAC;;0EAhKQ,aAAa;gGAAb,aAAa,WAAb,aAAa,mBAHV,MAAM;6FAGT,aAAa;cAJzB,wDAAU;eAAC;gBACR,UAAU,EAAE,MAAM;aACrB;;;;;;;;;;;;;;ACrBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgD;AACL;AACL;AAGgB;AACqB;AAGF;AAEb;;;;;;;AAMrD,MAAM,WAAW;IAGpB,YACY,IAAgB,EAChB,aAA4B,EAC5B,KAAmB,EACnB,MAAc,EACd,aAA4B;QAJ5B,SAAI,GAAJ,IAAI,CAAY;QAChB,kBAAa,GAAb,aAAa,CAAe;QAC5B,UAAK,GAAL,KAAK,CAAc;QACnB,WAAM,GAAN,MAAM,CAAQ;QACd,kBAAa,GAAb,aAAa,CAAe;QAEpC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,oEAAO,CAAC;aACrB,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC;QAE3C,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,2EAAc,CAAC;aAC5B,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE;YACf,IAAI,GAAG,EAAE;gBACL,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;gBAC/B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,uEAAW,CAAC,IAAI,CAAC,CAAC,CAAC;aAC9C;QACL,CAAC,CAAC,CAAC;IACX,CAAC;IAED,QAAQ;QACJ,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QACnD,MAAM,MAAM,GAAG,IAAI,mEAAgB,EAAE,CAAC;QACtC,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,KAAK,CAAC,EAAG;YACzC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAC3C,OAAO,+CAAE,CAAC,IAAI,CAAC,CAAC;SACnB;QACD,OAAO,+CAAE,CAAC,IAAI,CAAC,CAAC;IACpB,CAAC;IAED,cAAc,CAAC,IAAiC;QAC5C,MAAM,WAAW,GAAG;YAChB,OAAO,EAAE,IAAI,gEAAW,CAAC;gBACrB,cAAc,EAAE,kBAAkB;aACrC,CAAC;SACL,CAAC;QACF,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CACjB,yBAAyB,EACzB,EAAC,IAAI,EAAC,EACN,WAAW,CACd,CAAC;IACN,CAAC;IAED,KAAK,CAAC,aAA4B;;QAC9B,MAAM,WAAW,GAAG;YAChB,OAAO,EAAE,IAAI,gEAAW,CAAC;gBACrB,cAAc,EAAE,kBAAkB;aACrC,CAAC;SACL,CAAC;QAEF,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CACzB,gBAAgB,EAChB,aAAa,EACb,WAAW,CACd,CAAC;QAEF,IAAI,WAAI,CAAC,IAAI,0CAAE,IAAI,MAAK,OAAO,EAAE;YAC7B,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CACd,gEAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,CAC3B,CAAC;SACL;QAED,OAAO,MAAM,CAAC;IAClB,CAAC;IAED,MAAM,CAAC,aAA4B;;QAC/B,MAAM,WAAW,GAAG;YAChB,OAAO,EAAE,IAAI,gEAAW,CAAC;gBACrB,cAAc,EAAE,kBAAkB;aACrC,CAAC;SACL,CAAC;QAEF,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAC1B,iBAAiB,EACjB,aAAa,EACb,WAAW,CACd,CAAC;QAEF,IAAI,WAAI,CAAC,IAAI,0CAAE,IAAI,MAAK,OAAO,EAAE;YAC7B,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CACd,gEAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,CAC5B,CAAC;SACL;QAED,OAAO,OAAO,CAAC;IACnB,CAAC;IAGD,MAAM;QACF,MAAM,WAAW,GAAG;YAChB,OAAO,EAAE,IAAI,gEAAW,CAAC;gBACrB,cAAc,EAAE,kBAAkB;aACrC,CAAC;SACL,CAAC;QACF,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAChB,iBAAiB,EACjB,WAAW,CACd,CAAC;IACN,CAAC;IAED,aAAa,CAAC,eAAgC;QAC1C,MAAM,QAAQ,GAAG,eAAe,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC;QACvD,MAAM,eAAe,GAAG,eAAe,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,KAAK,CAAC;QACrE,IAAI,QAAQ,KAAK,eAAe,EAAE;YAC9B,eAAe,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACvD,OAAO,IAAI,CAAC;SACf;aAAM;YACH;;SAEH;YAEG,eAAe,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;YACrE;;SAEH;YACG,OAAO,IAAI,CAAC;SACf;IACL,CAAC;;sEAvHQ,WAAW;8FAAX,WAAW,WAAX,WAAW,mBAFR,MAAM;6FAET,WAAW;cAHvB,wDAAU;eAAC;gBACR,UAAU,EAAE,MAAM;aACrB;;;;;;;;;;;;;;ACbD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAY,iBAcX;AAdD,WAAY,iBAAiB;IACzB,wDAAmC;IACnC,uEAAkD;IAClD,2DAAsC;IACtC,0EAAqD;IACrD,gEAA2C;IAC3C,4EAAuD;IACvD,2FAAsE;IACtE,8DAAyC;IACzC,6EAAwD;IACxD,iDAA4B;IAC5B,+CAA0B;IAC1B,qDAAgC;IAChC,6CAAwB;AAC5B,CAAC,EAdW,iBAAiB,KAAjB,iBAAiB,QAc5B;AAED,wBAAwB;AACjB,MAAM,WAAW;IAEpB,YAAmB,OAA2B;QAA3B,YAAO,GAAP,OAAO,CAAoB;QADrC,SAAI,GAAG,iBAAiB,CAAC,WAAW,CAAC;IACI,CAAC;CACtD;AAEM,MAAM,kBAAkB;IAE3B,YAAmB,OAAsB;QAAtB,YAAO,GAAP,OAAO,CAAe;QADhC,SAAI,GAAG,iBAAiB,CAAC,kBAAkB,CAAC;IACR,CAAC;CACjD;AAEM,MAAM,YAAY;IAAzB;QACa,SAAI,GAAG,iBAAiB,CAAC,YAAY,CAAC;QAC/C,gDAAgD;IACpD,CAAC;CAAA;AAEM,MAAM,mBAAmB;IAE5B,YAAmB,OAA8B;QAA9B,YAAO,GAAP,OAAO,CAAuB;QADxC,SAAI,GAAG,iBAAiB,CAAC,mBAAmB,CAAC;IACD,CAAC;CACzD;AAEM,MAAM,aAAa;IAEtB,YAAmB,OAAwC;QAAxC,YAAO,GAAP,OAAO,CAAiC;QADlD,SAAI,GAAG,iBAAiB,CAAC,aAAa,CAAC;IACe,CAAC;CACnE;AAEM,MAAM,oBAAoB;IAE7B,YAAmB,OAAmC;QAAnC,YAAO,GAAP,OAAO,CAA4B;QAD7C,SAAI,GAAG,iBAAiB,CAAC,oBAAoB,CAAC;IACG,CAAC;CAC9D;AAEM,MAAM,2BAA2B;IAEpC,YAAmB,OAAqC;QAArC,YAAO,GAAP,OAAO,CAA8B;QAD/C,SAAI,GAAG,iBAAiB,CAAC,2BAA2B,CAAC;IACF,CAAC;CAChE;AAEM,MAAM,cAAc;IAA3B;QACa,SAAI,GAAG,iBAAiB,CAAC,cAAc,CAAC;IACrD,CAAC;CAAA;AAEM,MAAM,qBAAqB;IAE9B,YAAmB,OAAgC;QAAhC,YAAO,GAAP,OAAO,CAAyB;QAD1C,SAAI,GAAG,iBAAiB,CAAC,qBAAqB,CAAC;IACD,CAAC;CAC3D;AAEM,MAAM,WAAW;IAEpB,YAAmB,OAAY;QAAZ,YAAO,GAAP,OAAO,CAAK;QADtB,SAAI,GAAG,iBAAiB,CAAC,WAAW,CAAC;IACX,CAAC;CACvC;AAEM,MAAM,MAAM;IAEf,YAAmB,OAAqC;QAArC,YAAO,GAAP,OAAO,CAA8B;QAD/C,SAAI,GAAG,iBAAiB,CAAC,MAAM,CAAC;IACmB,CAAC;CAChE;AAEM,MAAM,OAAO;IAEhB,YAAmB,OAAiB;QAAjB,YAAO,GAAP,OAAO,CAAU;QAD3B,SAAI,GAAG,iBAAiB,CAAC,OAAO,CAAC;IACF,CAAC;CAC5C;AAEM,MAAM,UAAU;IAEnB,YAAmB,OAAiB;QAAjB,YAAO,GAAP,OAAO,CAAU;QAD3B,SAAI,GAAG,iBAAiB,CAAC,UAAU,CAAC;IACL,CAAC;CAC5C;;;;;;;;;;;;;AC/ED;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAY,eAUX;AAVD,WAAY,eAAe;IACvB,gDAA6B;IAC7B,8DAA2C;IAC3C,oEAAiD;IACjD,iDAA8B;IAC9B,qDAAkC;IAClC,yCAAsB;IACtB,2DAAwC;IACxC,2CAAwB;IACxB,2CAAwB;AAC5B,CAAC,EAVW,eAAe,KAAf,eAAe,QAU1B;AAEM,MAAM,QAAQ;IAArB;QACa,SAAI,GAAG,eAAe,CAAC,QAAQ,CAAC;IAC7C,CAAC;CAAA;AAEM,MAAM,aAAa;IAEtB,YAAmB,OAAa;QAAb,YAAO,GAAP,OAAO,CAAM;QADvB,SAAI,GAAG,eAAe,CAAC,aAAa,CAAC;IACV,CAAC;CACxC;AAEM,MAAM,gBAAgB;IAA7B;QACa,SAAI,GAAG,eAAe,CAAC,gBAAgB,CAAC;IACrD,CAAC;CAAA;AAEM,MAAM,SAAS;IAElB,YAAmB,OAAY;QAAZ,YAAO,GAAP,OAAO,CAAK;QADtB,SAAI,GAAG,eAAe,CAAC,SAAS,CAAC;IACP,CAAC;CACvC;AAEM,MAAM,WAAW;IAEpB,YAAmB,OAAsB;QAAtB,YAAO,GAAP,OAAO,CAAe;QADhC,SAAI,GAAG,eAAe,CAAC,WAAW,CAAC;IACE,CAAC;CAClD;AAEM,MAAM,KAAK;IAEd,YAAmB,OAAsB;QAAtB,YAAO,GAAP,OAAO,CAAe;QADhC,SAAI,GAAG,eAAe,CAAC,KAAK,CAAC;IACO,CAAC;CACjD;AAEM,MAAM,cAAc;IAEvB,YAAmB,OAAoC;QAApC,YAAO,GAAP,OAAO,CAA6B;QAD9C,SAAI,GAAG,eAAe,CAAC,cAAc,CAAC;IACY,CAAC;CAC/D;AAEM,MAAM,MAAM;IAEf,YAAmB,OAAsB;QAAtB,YAAO,GAAP,OAAO,CAAe;QADhC,SAAI,GAAG,eAAe,CAAC,MAAM,CAAC;IACM,CAAC;CACjD;AAEM,MAAM,MAAM;IAAnB;QACa,SAAI,GAAG,eAAe,CAAC,MAAM,CAAC;IAC3C,CAAC;CAAA;;;;;;;;;;;;;;;;;;;;;;;;;ACvD+D;AAGrB;AACa;AAElB;AAC2C;AAClB;AAEL;;;;;AAInD,MAAM,aAAa;IACtB,YACY,QAAiB,EACjB,MAAoB,EACpB,aAA4B;QAF5B,aAAQ,GAAR,QAAQ,CAAS;QACjB,WAAM,GAAN,MAAM,CAAc;QACpB,kBAAa,GAAb,aAAa,CAAe;QAGxC,YAAY;QACZ,mEAAmE;QACnE,+DAA+D;QAC/D,sEAAsE;QACtE,4FAA4F;QAC5F,6EAA6E;QAC7E,2EAA2E;QAC3E,UAAU;QACV,KAAK;QAGL,iBAAY,GAAkC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAC5D,4DAAM,CAAC,yEAAmC,CAAC,YAAY,CAAC;QACxD,mEAAmE;QACnE,gEAAS,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,CAAC,IAAI,CACzD,gEAAS,CAAC,CAAC,SAAS,EAAE,EAAE,CAAC;YACrB,IAAI,2EAAqC,CAAC,EAAE,SAAS,EAAE,CAAC;YACxD,IAAI,sEAAgC,EAAE;SACzC,CAAC,EACF,iEAAU,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,+CAAE,CAAC,IAAI,mEAA6B,CAAC,GAAG,CAAC,CAAC,CAAC,CAClE,CAAC,CACL,CAAC;QAGF,yBAAoB,GAAkC,IAAI,CAAC,QAAQ,CAAC,IAAI,CACpE,4DAAM,CAAC,yEAAmC,CAAC,oBAAoB,CAAC,EAChE,0DAAG,CAAC,CAAC,MAA8C,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,EACvE,gEAAS,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAC;YAC9D,cAAc,EAAE,OAAO,CAAC,aAAa,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC,aAAa,CAAC,OAAO;SACxF,CAAC,CAAC,IAAI,CACH,0DAAG,CAAC,CAAC,iBAAiB,EAAE,EAAE,CACtB,IAAI,mFAA6C,CAAC,EAAE,iBAAiB,EAAE,CAAC,CAC3E,EACD,iEAAU,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,+CAAE,CAAC,IAAI,mEAA6B,CAAC,GAAG,CAAC,CAAC,CAAC,CAClE,CAAC,CACL,CAAC;QAGF,kBAAa,GAAkC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAC7D,4DAAM,CAAC,yEAAmC,CAAC,aAAa,CAAC,EACzD,0DAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,sEAAgC,EAAE,CAAC,EAClD,iEAAU,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,+CAAE,CAAC,IAAI,mEAA6B,CAAC,GAAG,CAAC,CAAC,CAAC,CAClE,CAAC;QAGF,mBAAc,GAAkC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAC9D,4DAAM,CAAC,yEAAmC,CAAC,cAAc,CAAC,EAC1D,qEAAc,CACV,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,qEAAY,CAAC,EAChC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,yEAAgB,CAAC,CAAC,EACzC,0DAAG,CAAC,CAAC,CAAC,MAAM,EAAE,SAAS,EAAE,aAAa,CAAmC,EAAa,EAAE;YACpF,IAAI,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE;gBAClC,IAAI,SAAS,GAAG,IAAI,CAAC;gBACrB,aAAa,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,EAAE;oBAC5C,IAAI,MAAM,CAAC,OAAO,KAAK,IAAI,CAAC,cAAc,EAAE;wBACxC,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC;wBAC7B,OAAO,KAAK,CAAC;qBAChB;oBACD,OAAO,IAAI,CAAC;gBAChB,CAAC,CAAC,CAAC;gBAEH,IAAI,SAAS,EAAE;oBACX,MAAM,MAAM,GAAG;wBACX,SAAS;wBACT,OAAO,EAAE,IAAI,CAAC,GAAG;wBACjB,OAAO,EAAE,IAAI,CAAC,cAAc;wBAC5B,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI;wBAC/B,SAAS,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK;wBACjC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI;qBAClC,CAAC;oBACF,SAAS,GAAG,IAAI,CAAC;oBACjB,OAAO,MAAM,CAAC;iBACjB;gBACD,MAAM,MAAM,GAAG;oBACX,SAAS,EAAE,IAAI;oBACf,OAAO,EAAE,IAAI,CAAC,GAAG;oBACjB,OAAO,EAAE,IAAI,CAAC,cAAc;oBAC5B,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI;oBAC/B,SAAS,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK;oBACjC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI;iBAClC,CAAC;gBACF,OAAO,MAAM,CAAC;YAClB,CAAC,CAAC,CAAC;YACH,QAAQ,GAAG,CAAC,GAAG,QAAQ,EAAE,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,iCAAM,MAAM,KAAE,OAAO,EAAE,IAAI,IAAG,CAAC,CAAC,CAAC;YAC3F,OAAO,QAAQ,CAAC;QACpB,CAAC,CAAC,EACF,0DAAG,CAAC,CAAC,QAAQ,EAAE,EAAE;YACb,OAAO,IAAI,6EAAuC,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC;QACrE,CAAC,CAAC,EACF,iEAAU,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,+CAAE,CAAC,IAAI,mEAA6B,CAAC,GAAG,CAAC,CAAC,CAAC,CAClE,CAAC;QAGF,YAAO,GAAkC,IAAI,CAAC,QAAQ,CAAC,IAAI,CACvD,4DAAM,CAAC,yEAAmC,CAAC,OAAO,CAAC,EACnD,0DAAG,CAAC,CAAC,MAAiC,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,EAC1D,0DAAG,CAAC,CAAC,OAAO,EAAE,EAAE;YACZ,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YACpC,sCAAsC;YACtC,OAAO,IAAI,8DAAwB,CAAC,WAAW,CAAC,CAAC;QACrD,CAAC,CAAC,EACF,iEAAU,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,+CAAE,CAAC,IAAI,mEAA6B,CAAC,GAAG,CAAC,CAAC,CAAC,CAClE,CAAC;QAGF,eAAU,GAAkC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAC1D,4DAAM,CAAC,yEAAmC,CAAC,UAAU,CAAC,EACtD,0DAAG,CAAC,CAAC,MAAoC,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,EAC7D,0DAAG,CAAC,CAAC,OAAO,EAAE,EAAE;YACZ,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;YACvC,yCAAyC;YACzC,OAAO,IAAI,8DAAwB,CAAC,cAAc,CAAC,CAAC;QACxD,CAAC,CAAC,EACF,iEAAU,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,+CAAE,CAAC,IAAI,mEAA6B,CAAC,GAAG,CAAC,CAAC,CAAC,CAClE,CAAC;IApHE,CAAC;;0EALI,aAAa;gGAAb,aAAa,WAAb,aAAa;AAkBtB;IADC,4DAAM,EAAE;mDAWP;AAGF;IADC,4DAAM,EAAE;2DAYP;AAGF;IADC,4DAAM,EAAE;oDAKP;AAGF;IADC,4DAAM,EAAE;qDA8CP;AAGF;IADC,4DAAM,EAAE;8CAUP;AAGF;IADC,4DAAM,EAAE;iDAUP;6FAzHO,aAAa;cADzB,wDAAU;oPAmBP,YAAY,MAaZ,oBAAoB,MAcpB,aAAa,MAOb,cAAc,MAgDd,OAAO,MAYP,UAAU;;;;;;;;;;;;;;;;;;;;;;;;AC9H+C;AACI;AACtB;AACa;AAElB;AACsB;;;;AAIrD,MAAM,WAAW;IAiEpB,YACY,QAAiB,EACjB,WAAwB;QADxB,aAAQ,GAAR,QAAQ,CAAS;QACjB,gBAAW,GAAX,WAAW,CAAa;QAjEpC,aAAQ,GAAkC,IAAI,CAAC,QAAQ,CAAC,IAAI,CACxD,4DAAM,CAAC,qEAA+B,CAAC,QAAQ,CAAC,EAChD,0DAAG,CAAC,CAAC,MAAgC,EAAE,EAAE,CAAC,IAAI,CAAC,EAC/C,gEAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,IAAI,CAC7C,gEAAS,CAAC,CAAC,IAAI,EAAE,EAAE;YACf,IAAI,OAAiB,CAAC;YACtB,IAAI,IAAI,EAAE;gBACN,iBAAiB;gBACjB,OAAO,GAAG,CAAC,IAAI,mEAA6B,CAAC,IAAI,CAAC,EAAE,IAAI,+DAAyB,EAAE,CAAC,CAAC;gBACrF,iGAAiG;aACpG;iBAAM;gBACH,qBAAqB;gBACrB,OAAO,GAAG,CAAC,IAAI,sEAAgC,EAAE,EAAE,IAAI,kEAA4B,EAAE,CAAC,CAAC;aAC1F;YACD,OAAO,OAAO,CAAC;QACnB,CAAC,CAAC,EACF,iEAAU,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC;YAChB,IAAI,+DAAyB,CAAC,GAAG,CAAC;YAClC,IAAI,sEAAgC,EAAE;YACtC,IAAI,kEAA4B,EAAE;SACrC,CAAC,CACL,CAAC,CACL,CAAC;QAGF,WAAM,GAAkC,IAAI,CAAC,QAAQ,CAAC,IAAI,CACtD,4DAAM,CAAC,qEAA+B,CAAC,MAAM,CAAC,EAC9C,gEAAS,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,IAAI,CAC1C,0DAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,iEAA2B,CAAC,GAAG,CAAC,CAAC,EAChD,iEAAU,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,+CAAE,CAAC,IAAI,+DAAyB,CAAC,GAAG,CAAC,CAAC,CAAC,CAC9D,CAAC,CACL,CAAC;QAGF,UAAK,GAAkC,IAAI,CAAC,QAAQ,CAAC,IAAI,CACrD,4DAAM,CAAC,qEAA+B,CAAC,KAAK,CAAC,EAC7C,0DAAG,CAAC,CAAC,MAA6B,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,EACtD,gEAAS,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CACvD,0DAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,iEAA2B,CAAC,OAAO,CAAC,CAAC,EACpD,iEAAU,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,+CAAE,CAAC,IAAI,+DAAyB,CAAC,GAAG,CAAC,CAAC,CAAC,CAC9D,CAAC,CACL,CAAC;QAGF,mBAAc,GAAkC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAC9D,4DAAM,CAAC,qEAA+B,CAAC,cAAc,CAAC,EACtD,0DAAG,CAAC,CAAC,MAA6B,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,EACtD,gEAAS,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,IAAI,CAChE,0DAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,iEAA2B,CAAC,OAAO,CAAC,CAAC,EACpD,iEAAU,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,+CAAE,CAAC,IAAI,+DAAyB,CAAC,GAAG,CAAC,CAAC,CAAC,CAC9D,CAAC,CACL,CAAC;QAGF,WAAM,GAAkC,IAAI,CAAC,QAAQ,CAAC,IAAI,CACtD,4DAAM,CAAC,qEAA+B,CAAC,MAAM,CAAC,EAC9C,0DAAG,CAAC,CAAC,MAA8B,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,EACvD,gEAAS,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CACxD,0DAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,iEAA2B,CAAC,GAAG,CAAC,CAAC,EAChD,iEAAU,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,+CAAE,CAAC,IAAI,+DAAyB,CAAC,GAAG,CAAC,CAAC,CAAC,CAC9D,CAAC,CACL,CAAC;IAKC,CAAC;;sEApEK,WAAW;8FAAX,WAAW,WAAX,WAAW;AAEpB;IADC,4DAAM,EAAE;6CAuBP;AAGF;IADC,4DAAM,EAAE;2CAOP;AAGF;IADC,4DAAM,EAAE;0CAQP;AAGF;IADC,4DAAM,EAAE;mDAQP;AAGF;IADC,4DAAM,EAAE;2CAQP;6FA/DO,WAAW;cADvB,wDAAU;mLAGP,QAAQ,MAyBR,MAAM,MASN,KAAK,MAUL,cAAc,MAUd,MAAM;;;;;;;;;;;;;ACnEV;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4E;AAGrE,MAAM,aAAa,GAAG,KAAK,CAAC;AAO5B,MAAM,YAAY,GAAU;IACjC,OAAO,EAAE,KAAK;CACf,CAAC;AAEK,SAAS,OAAO,CAAC,KAAK,GAAG,YAAY,EAAE,MAAc;IAC1D,QAAQ,MAAM,CAAC,IAAI,EAAE;QAEnB;YACE,OAAO,KAAK,CAAC;KAChB;AACH,CAAC;AAED,MAAM,eAAe,GAAG,yEAAqB,CAAQ,aAAa,CAAC,CAAC;AAE7D,MAAM,UAAU,GAAG,kEAAc,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;;;;;;;;;;;;;ACtBpF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgE;AACrB;AACI;AACN;AAQlC,MAAM,QAAQ,GAA4B;IAC7C,IAAI,EAAE,qDAAgB;IACtB,MAAM,EAAE,uDAAkB;IAC1B,GAAG,EAAE,oDAAe;CACvB,CAAC;AAEK,MAAM,YAAY,GAAyB,CAAC,qEAAW,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;;;;;;;;;;;;;ACnBpF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6E;AACT;AAG7D,MAAM,gBAAgB,GAAG,QAAQ,CAAC;AAalC,MAAM,YAAY,GAAU;IAC/B,IAAI,EAAE,EAAE;IACR,SAAS,EAAE,EAAE;IACb,aAAa,EAAE,EAAE;IACjB,aAAa,EAAE,IAAI;IACnB,iBAAiB,EAAE,EAAE;IACrB,QAAQ,EAAE,EAAE;IACZ,OAAO,EAAE,KAAK;IACd,MAAM,EAAE,cAAc;CACzB,CAAC;AAEK,SAAS,OAAO,CAAC,KAAK,GAAG,YAAY,EAAE,MAAqB;IAC/D,QAAQ,MAAM,CAAC,IAAI,EAAE;QACjB,KAAK,yEAAiB,CAAC,aAAa;YAChC,uCAAY,KAAK,KAAE,aAAa,EAAE,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,IAAE;QACzE,KAAK,yEAAiB,CAAC,oBAAoB;YACvC,uCAAY,KAAK,KAAE,aAAa,EAAE,MAAM,CAAC,OAAO,CAAC,aAAa,IAAG;QACrE,KAAK,yEAAiB,CAAC,2BAA2B;YAC9C,uCAAY,KAAK,KAAE,iBAAiB,EAAE,MAAM,CAAC,OAAO,CAAC,iBAAiB,IAAG;QAC7E,KAAK,yEAAiB,CAAC,WAAW;YAC9B,uCAAY,KAAK,KAAE,OAAO,EAAE,IAAI,IAAG;QACvC,KAAK,yEAAiB,CAAC,kBAAkB;YACrC,uCAAY,KAAK,KAAE,OAAO,EAAE,KAAK,EAAE,iBAAiB,EAAE,CAAC,GAAG,KAAK,CAAC,iBAAiB,EAAE,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAE;QAChH,KAAK,yEAAiB,CAAC,mBAAmB;YACtC,uCAAY,KAAK,KAAE,SAAS,EAAE,MAAM,CAAC,OAAO,CAAC,SAAS,IAAG;QAC7D,KAAK,yEAAiB,CAAC,qBAAqB;YACxC,uCAAY,KAAK,KAAE,QAAQ,EAAE,MAAM,CAAC,OAAO,CAAC,QAAQ,IAAG;QAC3D,KAAK,yEAAiB,CAAC,MAAM;YACzB,uCAAY,KAAK,KAAE,MAAM,EAAE,MAAM,CAAC,OAAO,IAAG;QAChD;YACI,OAAO,KAAK,CAAC;KACpB;AACL,CAAC;AAED,MAAM,eAAe,GAAG,yEAAqB,CAAQ,gBAAgB,CAAC,CAAC;AAChE,MAAM,OAAO,GAAG,kEAAc,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AACvE,MAAM,YAAY,GAAG,kEAAc,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;AACjF,MAAM,gBAAgB,GAAG,kEAAc,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;AACzF,MAAM,WAAW,GAAG,kEAAc,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AAC/E,MAAM,gBAAgB,GAAG,kEAAc,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;AACzF,MAAM,oBAAoB,GAAG,kEAAc,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;AACjG,MAAM,SAAS,GAAG,kEAAc,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;;;;;;;;;;;;;ACxDlF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoE;AACG;AAEhE,MAAM,cAAc,GAAG,MAAM,CAAC;AAQ9B,MAAM,YAAY,GAAU;IAC/B,IAAI,EAAE,IAAI;IACV,OAAO,EAAE,KAAK;IACd,cAAc,EAAE,IAAI;CACvB,CAAC;AAEK,SAAS,OAAO,CAAC,KAAK,GAAG,YAAY,EAAE,MAAmB;IAC7D,QAAQ,MAAM,CAAC,IAAI,EAAE;QACjB,KAAK,qEAAe,CAAC,QAAQ;YACzB,uCAAY,KAAK,KAAE,OAAO,EAAE,IAAI,IAAG;QAEvC,KAAK,qEAAe,CAAC,aAAa;YAC9B,uCAAY,KAAK,KAAE,IAAI,oBAAO,MAAM,CAAC,OAAO,GAAI,OAAO,EAAE,KAAK,IAAG;QAErE,KAAK,qEAAe,CAAC,gBAAgB;YACjC,uCAAY,KAAK,KAAE,IAAI,EAAE,YAAY,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,IAAG;QAEjE,KAAK,qEAAe,CAAC,WAAW;YAC5B,uCAAY,KAAK,KAAE,cAAc,EAAE,MAAM,CAAC,OAAO,IAAG;QAExD;YACI,OAAO,KAAK,CAAC;KACpB;AACL,CAAC;AAED,MAAM,eAAe,GAAG,yEAAqB,CAAQ,cAAc,CAAC,CAAC;AAE9D,MAAM,OAAO,GAAG,kEAAc,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AACvE,MAAM,cAAc,GAAG,kEAAc,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;;;;;;;;;;;;;ACzC/F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2D;AAClB;AACoB;AACnB;AACU;AACN;AACO;AACI;;;;;AAkBlD,MAAM,cAAc;;6FAAd,cAAc;sJAAd,cAAc,kBAbd;YACL,uDAAW,CAAC,OAAO,CAAC,kDAAQ,EAAE;gBAC1B,oEAAY;gBACZ,aAAa,EAAE;oBACX,uBAAuB,EAAE,IAAI;oBAC7B,wBAAwB,EAAE,IAAI;iBACjC;aACJ,CAAC;YACF,wEAAmB,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE,qEAAW,CAAC,UAAU,EAAE,CAAC;YAC/E,2DAAa,CAAC,OAAO,CAAC,CAAC,iEAAW,EAAE,qEAAa,CAAC,CAAC;SACtD;mIAGQ,cAAc;6FAAd,cAAc;cAf1B,sDAAQ;eAAC;gBACN,YAAY,EAAE,EAAE;gBAChB,OAAO,EAAE;oBACL,uDAAW,CAAC,OAAO,CAAC,kDAAQ,EAAE;wBAC1B,oEAAY;wBACZ,aAAa,EAAE;4BACX,uBAAuB,EAAE,IAAI;4BAC7B,wBAAwB,EAAE,IAAI;yBACjC;qBACJ,CAAC;oBACF,wEAAmB,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE,qEAAW,CAAC,UAAU,EAAE,CAAC;oBAC/E,2DAAa,CAAC,OAAO,CAAC,CAAC,iEAAW,EAAE,qEAAa,CAAC,CAAC;iBACtD;aACJ;;;;;;;;;;;;;;ACvBD;AAAA;AAAA,gFAAgF;AAChF,0EAA0E;AAC1E,gEAAgE;AAEzD,MAAM,WAAW,GAAG;IACvB,UAAU,EAAE,KAAK;IACjB,GAAG,EAAE;QACD,IAAI,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE,EAAE;QACnC,KAAK,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,OAAO,EAAE,EAAE,EAAE;KACxC;CACJ,CAAC;AAEF;;;;;;GAMG;AACH,mEAAmE;;;;;;;;;;;;;ACnBnE;AAAA;AAAA;AAAA;AAAA;AAA+C;AAIU;;;AAEzD,IAAI,qEAAW,CAAC,UAAU,EAAE;IAC1B,oEAAc,EAAE,CAAC;CAClB;AAED,2EAAwB,gBAAgB,CAAC,0DAAU;KAChD,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { AuthGuard } from './services/auth.guard';\r\nimport { NoAuthGuard } from './services/no-auth.guard';\r\nimport { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: 'auth',\r\n        loadChildren: () => import('./modules/auth/auth.module').then((m) => m.AuthModule),\r\n        canActivate: [NoAuthGuard],\r\n    },\r\n    {\r\n        path: 'chat',\r\n        loadChildren: () => import('./modules/chat/chat.module').then((m) => m.ChatModule),\r\n        canLoad: [AuthGuard],\r\n        canActivate: [AuthGuard],\r\n    },\r\n    {\r\n        path: '',\r\n        loadChildren: () => import('./modules/home/home.module').then((m) => m.HomeModule),\r\n    },\r\n    {\r\n        path: '**',\r\n        redirectTo: '',\r\n        pathMatch: 'full',\r\n    },\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forRoot(routes)],\r\n    exports: [RouterModule],\r\n})\r\nexport class AppRoutingModule { }\r\n","import { UserService } from './services/user.service';\r\nimport { LoadUser } from './store/actions/user.actions';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\nimport { State } from './store/reducers';\r\n\r\n@Component({\r\n    selector: 'app-root',\r\n    templateUrl: './app.component.html',\r\n    styleUrls: ['./app.component.scss'],\r\n})\r\n\r\nexport class AppComponent implements OnInit {\r\n    constructor(\r\n        private store: Store<State>,\r\n        private userService: UserService,\r\n    ) { }\r\n\r\n    ngOnInit() {\r\n        this.store.dispatch(new LoadUser());\r\n    }\r\n}\r\n","<app-nav></app-nav>\r\n<router-outlet></router-outlet>\r\n","import { NavModule } from './modules/nav/nav.module';\r\nimport { CookieService } from 'ngx-cookie-service';\r\nimport { SocketIoModule, SocketIoConfig, Socket } from 'ngx-socket-io';\r\nimport { AppStoreModule } from './store/store.module';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { InjectionToken, NgModule } from '@angular/core';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { ServiceWorkerModule } from '@angular/service-worker';\r\nimport { environment } from '../environments/environment';\r\nimport { HTTP_INTERCEPTORS, HttpClientModule } from '@angular/common/http';\r\nimport { HttpInterceptorService } from './services/http-interceptor.service';\r\n\r\n\r\nconst config: SocketIoConfig = { url: '/', options: { autoConnect: false } };\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AppComponent,\r\n    ],\r\n    imports: [\r\n        BrowserModule,\r\n        AppRoutingModule,\r\n        NavModule,\r\n        ServiceWorkerModule.register('ngsw-worker.js', { enabled: environment.production }),\r\n        AppStoreModule,\r\n        HttpClientModule,\r\n        SocketIoModule.forRoot(config),\r\n    ],\r\n    providers: [\r\n        CookieService,\r\n        { provide: HTTP_INTERCEPTORS, useClass: HttpInterceptorService, multi: true },\r\n        // { provide: Socket, useFactory: nspSocketServiceFactory },\r\n        // { provide: NSP_GUEST, useValue: environment.nsp.guest },\r\n    ],\r\n    bootstrap: [AppComponent],\r\n})\r\nexport class AppModule { }\r\n","import { Logout } from './../../store/actions/user.actions';\r\nimport { UserService } from './../../services/user.service';\r\nimport { Component, Directive, ElementRef, OnInit, QueryList, ViewChild, ViewChildren } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\nimport { Collapse } from 'bootstrap';\r\nimport { User } from 'src/app/interfaces';\r\nimport { State } from 'src/app/store/reducers';\r\nimport { getUser } from 'src/app/store/reducers/user.reducer';\r\n\r\n\r\n@Component({\r\n    selector: 'app-nav',\r\n    templateUrl: './nav.component.html',\r\n    styleUrls: ['./nav.component.scss'],\r\n})\r\nexport class NavComponent implements OnInit {\r\n    @ViewChild('navbarToggler') menuToggleRef: ElementRef;\r\n    bsCollapse: any;\r\n    user: User;\r\n\r\n    constructor(\r\n        private store: Store<State>,\r\n        private userService: UserService,\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n        this.store.select(getUser)\r\n            .subscribe((user) => this.user = user);\r\n    }\r\n\r\n    toggle() {\r\n        console.log('toggle');\r\n        this.bsCollapse.toggle();\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.bsCollapse = new Collapse(this.menuToggleRef.nativeElement, {toggle: false});\r\n    }\r\n\r\n    logout() {\r\n        this.store.dispatch(new Logout());\r\n    }\r\n}\r\n","<nav class=\"navbar navbar-expand-lg sticky-top navbar-dark bg-dark\">\r\n  <div class=\"container-fluid\">\r\n    <a class=\"navbar-brand mx-3\" [routerLink]=\"['/']\">Chat Application</a>\r\n    <button class=\"navbar-toggler\" type=\"button\" (click)=\"toggle()\" aria-controls=\"navbarToggler\" aria-expanded=\"false\"\r\n      aria-label=\"Toggle navigation\">\r\n      <span class=\"navbar-toggler-icon\"></span>\r\n    </button>\r\n    <div class=\"collapse navbar-collapse\" id=\"navbarToggler\" #navbarToggler>\r\n      <ul class=\"navbar-nav ms-auto mb-2 mb-lg-0 me-5\">\r\n\r\n        <li class=\"nav-item mx-3\">\r\n          <a class=\"nav-link\" aria-current=\"page\" [routerLink]=\"['/']\" [routerLinkActiveOptions]=\"{exact: true}\"\r\n            routerLinkActive=\"active\">Home</a>\r\n        </li>\r\n        <!-- <li *ngIf=\"user && user?.role !== 'guest'\" class=\"nav-item mx-3\"> -->\r\n        <li *ngIf=\"user\" class=\"nav-item mx-3\">\r\n          <a class=\"nav-link\" aria-current=\"page\" [routerLink]=\"['/chat']\" [routerLinkActiveOptions]=\"{exact: true}\"\r\n            routerLinkActive=\"active\">Chat</a>\r\n        </li>\r\n        <li *ngIf=\"!user || user?.role === 'guest'\" class=\"nav-item mx-3\">\r\n          <a class=\"nav-link\" aria-current=\"page\" [routerLink]=\"['auth', 'signin']\"\r\n            [routerLinkActiveOptions]=\"{exact: true}\" routerLinkActive=\"active\">Signin</a>\r\n        </li>\r\n        <li *ngIf=\"user && user?.role !== 'guest'\" class=\"nav-item mx-3\">\r\n          <a class=\"nav-link cursor-pointer\" aria-current=\"page\" (click)=\"logout()\">Logout</a>\r\n        </li>\r\n        <li *ngIf=\"user && user?.role === 'guest'\" class=\"nav-item mx-3\">\r\n          <a class=\"nav-link cursor-pointer\" aria-current=\"page\" (click)=\"logout()\">Leave chat</a>\r\n        </li>\r\n        <li *ngIf=\"user\" class=\"nav-item navbar-text mx-3 text-light\">\r\n          <i class=\"bi bi-person-circle pe-2\"></i>{{user.name}}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</nav>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NavComponent } from './nav.component';\r\nimport { RouterModule } from '@angular/router';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        NavComponent,\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        RouterModule,\r\n    ],\r\n    exports: [\r\n        NavComponent,\r\n    ],\r\n})\r\nexport class NavModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { CanLoad, Route, UrlSegment, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router, CanActivate } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { Store } from '@ngrx/store';\r\nimport { State } from '../store/reducers';\r\n\r\nimport { map, take } from 'rxjs/operators';\r\nimport { getUser } from '../store/reducers/user.reducer';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class AuthGuard implements CanLoad, CanActivate {\r\n    constructor(\r\n        private router: Router,\r\n        private store: Store<State>,\r\n    ) { }\r\n\r\n    // Prevents fetching lazy loading modules\r\n    canLoad(route: Route, segments: UrlSegment[]): Observable<boolean> | Promise<boolean> | boolean {\r\n        return this.store.select(getUser).pipe(\r\n            map((user) => {\r\n                if (!user) {\r\n                    this.router.navigateByUrl('/auth/signin');\r\n                    return false;\r\n                }\r\n                return true;\r\n            }),\r\n            take(1),\r\n        );\r\n    }\r\n\r\n    // If lazy loadnig module already fetched and user logged out\r\n    // this guard prevents to activate module\r\n    canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot):\r\n    Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n        return this.store.select(getUser).pipe(\r\n            map((user) => {\r\n                if (!user) {\r\n                    this.router.navigateByUrl('/auth/signin');\r\n                    return false;\r\n                }\r\n                return true;\r\n            }),\r\n        // take(1),\r\n        );\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpEvent, HttpInterceptor, HttpHandler, HttpRequest, HttpResponse } from '@angular/common/http';\r\n\r\nimport { Observable } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\n\r\nimport { Store } from '@ngrx/store';\r\nimport { State } from '../store/reducers';\r\nimport { LoadUser } from '../store/actions/user.actions';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\n\r\nexport class HttpInterceptorService implements HttpInterceptor {\r\n    constructor(\r\n        private store: Store<State>,\r\n    ) { }\r\n\r\n    intercept(req: HttpRequest<any>, next: HttpHandler):\r\n    Observable<HttpEvent<any>> {\r\n    // to modify request\r\n        // req = req.clone();\r\n        // return next.handle(req);\r\n\r\n\r\n        return next.handle(req).pipe(\r\n            tap((event: HttpEvent<any>) => {\r\n                if (event instanceof HttpResponse) {\r\n                    // fire action to check user auth\r\n                    this.store.dispatch(new LoadUser());\r\n\r\n                    // to modify response\r\n                    // event = event.clone({ body: this.modifyBody(event.body) });\r\n                }\r\n                return event;\r\n            },\r\n            ));\r\n    }\r\n\r\n    private modifyBody(body: any) {\r\n    /*\r\n    * write your logic to modify the body\r\n    * */\r\n        return body;\r\n    }\r\n}\r\n\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router, CanActivate } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { Store } from '@ngrx/store';\r\nimport { State } from '../store/reducers';\r\n\r\nimport { UserService } from './user.service';\r\nimport { map } from 'rxjs/operators';\r\nimport { getUser } from '../store/reducers/user.reducer';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class NoAuthGuard implements CanActivate {\r\n    constructor(\r\n        private userService: UserService,\r\n        private router: Router,\r\n        private store: Store<State>,\r\n\r\n    ) { }\r\n\r\n    canActivate( route: ActivatedRouteSnapshot, state: RouterStateSnapshot):\r\n    Observable<boolean | UrlTree>| Promise<boolean | UrlTree>| boolean | UrlTree {\r\n        return this.store.select(getUser).pipe(\r\n            map((user) => {\r\n                if (user && user.role !== 'guest') {\r\n                    this.router.navigateByUrl('/');\r\n                    return false;\r\n                }\r\n                return true;\r\n            }),\r\n        // take(1),\r\n        );\r\n    }\r\n}\r\n","import { HttpHeaders, HttpClient, HttpParams } from '@angular/common/http';\r\nimport { NspType, Msg, User, MessageType, Message, NSP, Room } from './../interfaces';\r\nimport { getUser } from './../store/reducers/user.reducer';\r\nimport { Injectable } from '@angular/core';\r\nimport { Socket, SocketIoConfig } from 'ngx-socket-io';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { Observable, of } from 'rxjs';\r\nimport { Store } from '@ngrx/store';\r\nimport { State } from '../store/reducers';\r\nimport { getMsgs } from '../store/reducers/socket.reducer';\r\nimport { GetMessagesSuccess } from '../store/actions/socket.actions';\r\n\r\nexport class SocketNsp extends Socket {\r\n    constructor(socketConfig: SocketIoConfig) {\r\n        super(socketConfig);\r\n    }\r\n}\r\n\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\n\r\nexport class SocketService {\r\n    user: User | null;\r\n    msgs: Message[];\r\n\r\n    // guestNsp: SocketNsp;\r\n    // userNsp: SocketNsp;\r\n    // adminNsp: SocketNsp;\r\n\r\n    constructor(\r\n        private socket: Socket,\r\n        private store: Store<State>,\r\n        private http: HttpClient,\r\n    ) {\r\n        this.store.select(getUser)\r\n            .subscribe((user) => this.user = user);\r\n\r\n        this.store.select(getMsgs)\r\n            .subscribe((msgs) => this.msgs = msgs);\r\n\r\n        // create socket namespaces and event listeners for every namespace\r\n        // for (const nsp of NSP) {\r\n        //     this[nsp + 'Nsp'] = this.socketNspFactory(nsp);\r\n        // }\r\n        // for socket root namespace\r\n        // this.socket;\r\n    }\r\n\r\n    isConnected(nsp?: NspType): Socket | SocketNsp {\r\n        if (nsp) {\r\n            return this.socketNsp(nsp);\r\n        }\r\n        return this.socket;\r\n    }\r\n\r\n    connect(nsp?: NspType): void {\r\n        if (nsp === 'guest') {\r\n            this.socketNsp(nsp).connect();\r\n            return;\r\n        }\r\n        if (nsp === 'user') {\r\n            this.socketNsp(nsp).connect();\r\n            this.socketNsp('guest').connect();\r\n            return;\r\n        }\r\n        this.socket.connect();\r\n    }\r\n\r\n    disconnect(nsp?: NspType): void {\r\n        if (nsp === 'guest') {\r\n            this.socketNsp(nsp).disconnect();\r\n            return;\r\n        }\r\n        if (nsp === 'user') {\r\n            this.socketNsp(nsp).disconnect();\r\n            this.socketNsp('guest').disconnect();\r\n            return;\r\n        }\r\n        this.socket.disconnect();\r\n    }\r\n\r\n    onSocketEvent(socketEvent: MessageType, nsp?: NspType) {\r\n        if (nsp) {\r\n            return this.socketNsp(nsp).fromEvent(socketEvent).pipe(\r\n                map((data: Message) => data));\r\n        }\r\n        return this.socket.fromEvent(socketEvent).pipe(\r\n            map((data: Message) => data));\r\n    }\r\n\r\n    emitSocketEvent(socketEvent: MessageType, socketData: Message, nsp?: NspType) {\r\n        if (nsp) {\r\n            this.socketNsp(nsp).emit(socketEvent, socketData);\r\n            return;\r\n        }\r\n        this.socket.emit(socketEvent, socketData);\r\n    }\r\n\r\n    private socketNsp(nsp: NspType): SocketNsp {\r\n        return this[nsp + 'Nsp'];\r\n    }\r\n\r\n    private socketNspFactory(nsp: NspType) {\r\n        return new SocketNsp({ url: '/' + nsp + 'Nsp', options: {} });\r\n    }\r\n\r\n    // getMessages({room_id}): Observable<Message[]> {\r\n    //     return of([{\r\n    //         _id: 'sdfsdfsdfsd',\r\n    //         text: 'test1',\r\n    //         delivered: true,\r\n    //     }, {\r\n    //         _id: 'sdfs2342dfsdfsd',\r\n    //         text: 'test2',\r\n    //         delivered: false,\r\n    //     }]);\r\n    // }\r\n\r\n    getUserRooms():Observable<Room[]> {\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            }),\r\n        };\r\n\r\n        return this.http.get<Room[]>(\r\n            'api/socket/get-user-rooms',\r\n            httpOptions,\r\n        );\r\n    }\r\n\r\n    getGetActiveContactMsgs({ anotherUser_id, room_id }): Observable<Msg[]> {\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            }),\r\n            params: new HttpParams()\r\n                .set('anotherUser_id', anotherUser_id)\r\n                .set('room_id', room_id),\r\n        };\r\n        return this.http.get<Msg[]>(\r\n            'api/socket/get-active-contact-msgs',\r\n            httpOptions,\r\n        );\r\n    }\r\n\r\n    // sendMessage(msg: Message) {\r\n    //     this.guestNsp.emit('message', msg);\r\n    // }\r\n\r\n    // getMessage() {\r\n    //     return this.guestNsp.fromEvent('message').pipe(\r\n    //         map((msg: Message) => msg));\r\n    // }\r\n\r\n    // getMWError() {\r\n    //     return this.guestNsp.fromEvent('connect_error').pipe(\r\n    //         map((msg: any) => {\r\n    //             console.log('msg error', msg);\r\n    //             return msg;\r\n    //         }));\r\n    // }\r\n\r\n    // getPatchMessage(): Observable<void> {\r\n    //     return this.guestNsp.fromEvent('patchMessage').pipe(\r\n    //         map((patch) => this.store.dispatch(new GetMessagesSuccess(this.patchMessage(patch)))),\r\n    //     );\r\n    // }\r\n\r\n    uuid() {\r\n        return uuidv4();\r\n    }\r\n\r\n    composeMessage(text: string): Msg {\r\n        return {\r\n            text,\r\n            // _id: this.uuid(),\r\n            // delivered: false,\r\n            // createdAt: Date.now(),\r\n            // author_id: this.user._id,\r\n        };\r\n    }\r\n\r\n    // patchMessage(patch: Partial<Message>) {\r\n    //     return this.messages.map((el) => {\r\n    //         if (patch._id === el._id) {\r\n    //             return { ...el, ...patch };\r\n    //         }\r\n    //     });\r\n    // }\r\n}\r\n\r\n\r\n","import { SocketService } from './socket.service';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { User, UserCandidate } from '../interfaces';\r\nimport { CookieService } from 'ngx-cookie-service';\r\nimport { JwtHelperService } from '@auth0/angular-jwt';\r\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\r\nimport { AbstractControl, ValidationErrors } from '@angular/forms';\r\nimport { Store } from '@ngrx/store';\r\nimport { getUser, redirectionUrl } from '../store/reducers/user.reducer';\r\nimport { Router } from '@angular/router';\r\nimport { Redirection } from '../store/actions/user.actions';\r\nimport { State } from '../store/reducers';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class UserService {\r\n    user: User;\r\n\r\n    constructor(\r\n        private http: HttpClient,\r\n        private cookieService: CookieService,\r\n        private store: Store<State>,\r\n        private router: Router,\r\n        private socketService: SocketService,\r\n    ) {\r\n        this.store.select(getUser)\r\n            .subscribe((user) => this.user = user);\r\n\r\n        this.store.select(redirectionUrl)\r\n            .subscribe((url) => {\r\n                if (url) {\r\n                    this.router.navigateByUrl(url);\r\n                    this.store.dispatch(new Redirection(null));\r\n                }\r\n            });\r\n    }\r\n\r\n    loadUser(): Observable<User | null> {\r\n        const token = this.cookieService.get('chatClient');\r\n        const helper = new JwtHelperService();\r\n        if (token && !helper.isTokenExpired(token) ) {\r\n            const { user } = helper.decodeToken(token);\r\n            return of(user);\r\n        }\r\n        return of(null);\r\n    }\r\n\r\n    loginAnonymous(name: Pick<UserCandidate, 'name'>): Observable<void> {\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            }),\r\n        };\r\n        return this.http.post<null>(\r\n            'api/user/loginAnonymous',\r\n            {name},\r\n            httpOptions,\r\n        );\r\n    }\r\n\r\n    login(userCandidate: UserCandidate): Observable<null> {\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            }),\r\n        };\r\n\r\n        const login$ = this.http.post<null>(\r\n            'api/user/login',\r\n            userCandidate,\r\n            httpOptions,\r\n        );\r\n\r\n        if (this.user?.role === 'guest') {\r\n            this.logout().pipe(\r\n                switchMap((_) => login$),\r\n            );\r\n        }\r\n\r\n        return login$;\r\n    }\r\n\r\n    signup(userCandidate: UserCandidate): Observable<null> {\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            }),\r\n        };\r\n\r\n        const signup$ = this.http.post<null>(\r\n            'api/user/signup',\r\n            userCandidate,\r\n            httpOptions,\r\n        );\r\n\r\n        if (this.user?.role === 'guest') {\r\n            this.logout().pipe(\r\n                switchMap((_) => signup$),\r\n            );\r\n        }\r\n\r\n        return signup$;\r\n    }\r\n\r\n\r\n    logout(): Observable<null> {\r\n        const httpOptions = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n            }),\r\n        };\r\n        return this.http.get<null>(\r\n            'api/user/logout',\r\n            httpOptions,\r\n        );\r\n    }\r\n\r\n    matchPassword(abstractControl: AbstractControl): ValidationErrors | null {\r\n        const password = abstractControl.get('password').value;\r\n        const passwordConfirm = abstractControl.get('passwordConfirm').value;\r\n        if (password === passwordConfirm) {\r\n            abstractControl.get('passwordConfirm').setErrors(null);\r\n            return null;\r\n        } else {\r\n            /**\r\n       * set error to 'passwordConfirm' element\r\n       */\r\n\r\n            abstractControl.get('passwordConfirm').setErrors({ mismatch: true });\r\n            /**\r\n       * and don't set error (null) to formGroup\r\n       */\r\n            return null;\r\n        }\r\n    }\r\n\r\n    // localGuest(): Observable<string> {\r\n    //     const httpOptions = {\r\n    //         headers: new HttpHeaders({\r\n    //             'Content-Type': 'application/json',\r\n    //         }),\r\n    //     };\r\n\r\n    //     return this.http.post<string>(\r\n    //         'api/user/guest',\r\n    //         null,\r\n    //         httpOptions,\r\n    //     );\r\n    // }\r\n}\r\n","import { NspType, ActiveSocket, Room, Msg, User, Contact } from './../../interfaces';\r\nimport { Action } from '@ngrx/store';\r\nimport { Message } from 'src/app/interfaces';\r\n\r\nexport enum SocketActionTypes {\r\n    GetMessages = 'socket/get messages',\r\n    GetMessagesSuccess = 'socket/get messages success',\r\n    GetUserRooms = 'socket/get user rooms',\r\n    GetUserRoomsSuccess = 'socket/get user rooms success',\r\n    ActiveSockets = 'socket/get active sockets',\r\n    GetActiveContactMsgs = 'socket/get active contact msgs',\r\n    GetActiveContactMsgsSuccess = 'socket/get active contact msgs success',\r\n    UpdateContacts = 'socket/update contacts',\r\n    UpdateContactsSuccess = 'socket/update contacts success',\r\n    SocketError = 'socket/error',\r\n    Connect = 'socket/connect',\r\n    Disconnect = 'socket/disconnect',\r\n    Status = 'socket/status',\r\n}\r\n\r\n// get mesgs from server\r\nexport class GetMessages implements Action {\r\n    readonly type = SocketActionTypes.GetMessages;\r\n    constructor(public payload: Pick<Room, '_id' >) { }\r\n}\r\n\r\nexport class GetMessagesSuccess implements Action {\r\n    readonly type = SocketActionTypes.GetMessagesSuccess;\r\n    constructor(public payload: {msgs: Msg[]}) { }\r\n}\r\n\r\nexport class GetUserRooms implements Action {\r\n    readonly type = SocketActionTypes.GetUserRooms;\r\n    // constructor(public payload: {_id: string}) {}\r\n}\r\n\r\nexport class GetUserRoomsSuccess implements Action {\r\n    readonly type = SocketActionTypes.GetUserRoomsSuccess;\r\n    constructor(public payload: { userRooms: Room[] }) { }\r\n}\r\n\r\nexport class ActiveSockets implements Action {\r\n    readonly type = SocketActionTypes.ActiveSockets;\r\n    constructor(public payload: {activeSockets: ActiveSocket[]}) { }\r\n}\r\n\r\nexport class GetActiveContactMsgs implements Action {\r\n    readonly type = SocketActionTypes.GetActiveContactMsgs;\r\n    constructor(public payload: { activeContact: Contact }) { }\r\n}\r\n\r\nexport class GetActiveContactMsgsSuccess implements Action {\r\n    readonly type = SocketActionTypes.GetActiveContactMsgsSuccess;\r\n    constructor(public payload: { activeContactMsgs: Msg[] }) { }\r\n}\r\n\r\nexport class UpdateContacts implements Action {\r\n    readonly type = SocketActionTypes.UpdateContacts;\r\n}\r\n\r\nexport class UpdateContactsSuccess implements Action {\r\n    readonly type = SocketActionTypes.UpdateContactsSuccess;\r\n    constructor(public payload: { contacts: Contact[] }) { }\r\n}\r\n\r\nexport class SocketError implements Action {\r\n    readonly type = SocketActionTypes.SocketError;\r\n    constructor(public payload: any) { }\r\n}\r\n\r\nexport class Status implements Action {\r\n    readonly type = SocketActionTypes.Status;\r\n    constructor(public payload: 'connected' | 'disconnected') { }\r\n}\r\n\r\nexport class Connect implements Action {\r\n    readonly type = SocketActionTypes.Connect;\r\n    constructor(public payload?: NspType) { }\r\n}\r\n\r\nexport class Disconnect implements Action {\r\n    readonly type = SocketActionTypes.Disconnect;\r\n    constructor(public payload?: NspType) { }\r\n}\r\n\r\nexport type SocketActions\r\n  = GetMessages\r\n  | GetMessagesSuccess\r\n  | GetUserRooms\r\n  | GetUserRoomsSuccess\r\n  | SocketError\r\n  | Status\r\n  | Connect\r\n  | Disconnect\r\n  | ActiveSockets\r\n  | GetActiveContactMsgs\r\n  | GetActiveContactMsgsSuccess\r\n  | UpdateContacts\r\n  | UpdateContactsSuccess;\r\n","import { User, UserCandidate } from './../../interfaces';\r\nimport { Action } from '@ngrx/store';\r\n\r\n\r\nexport enum UserActionTypes {\r\n    LoadUser = '[User] Load User',\r\n    Authenticated = '[User] Authenticated User',\r\n    NotAuthenticated = '[User] NotAuthenticated User',\r\n    AuthError = '[User] AuthError',\r\n    Redirection = '[User] Redirection',\r\n    Login = '[User] Login',\r\n    LoginAnonymous = '[User] LoginAnonymous',\r\n    Signup = '[User] Signup',\r\n    Logout = '[User] Logout',\r\n}\r\n\r\nexport class LoadUser implements Action {\r\n    readonly type = UserActionTypes.LoadUser;\r\n}\r\n\r\nexport class Authenticated implements Action {\r\n    readonly type = UserActionTypes.Authenticated;\r\n    constructor(public payload: User) { }\r\n}\r\n\r\nexport class NotAuthenticated implements Action {\r\n    readonly type = UserActionTypes.NotAuthenticated;\r\n}\r\n\r\nexport class AuthError implements Action {\r\n    readonly type = UserActionTypes.AuthError;\r\n    constructor(public payload: any) { }\r\n}\r\n\r\nexport class Redirection implements Action {\r\n    readonly type = UserActionTypes.Redirection;\r\n    constructor(public payload: string | null ) { }\r\n}\r\n\r\nexport class Login implements Action {\r\n    readonly type = UserActionTypes.Login;\r\n    constructor(public payload: UserCandidate) { }\r\n}\r\n\r\nexport class LoginAnonymous implements Action {\r\n    readonly type = UserActionTypes.LoginAnonymous;\r\n    constructor(public payload: Pick<UserCandidate, 'name'>) { }\r\n}\r\n\r\nexport class Signup implements Action {\r\n    readonly type = UserActionTypes.Signup;\r\n    constructor(public payload: UserCandidate) { }\r\n}\r\n\r\nexport class Logout implements Action {\r\n    readonly type = UserActionTypes.Logout;\r\n}\r\n\r\nexport type UserActions\r\n  = LoadUser\r\n  | Authenticated\r\n  | NotAuthenticated\r\n  | AuthError\r\n  | Redirection\r\n  | Login\r\n  | LoginAnonymous\r\n  | Signup\r\n  | Logout;\r\n  \r\n\r\n","import { ActiveSocket } from './../../interfaces';\r\nimport { getActiveSockets } from './../reducers/socket.reducer';\r\nimport { GetUserRooms, UpdateContacts, GetActiveContactMsgs } from './../actions/socket.actions';\r\nimport { SocketService } from './../../services/socket.service';\r\nimport { Injectable } from '@angular/core';\r\nimport { Actions, Effect, ofType } from '@ngrx/effects';\r\nimport { Action, Store } from '@ngrx/store';\r\nimport { Observable, of } from 'rxjs';\r\nimport { catchError, map, switchMap, tap, withLatestFrom } from 'rxjs/operators';\r\nimport * as fromSocketActions from '../actions/socket.actions';\r\nimport { State } from '../reducers';\r\nimport { getUserRooms } from '../reducers/socket.reducer';\r\nimport { Contact, Room } from 'src/app/interfaces';\r\n\r\n@Injectable()\r\nexport class SocketEffects {\r\n    constructor(\r\n        private actions$: Actions,\r\n        private store$: Store<State>,\r\n        private socketService: SocketService,\r\n    ) { }\r\n\r\n    // @Effect()\r\n    // getMessages: Observable<Action | Action[]> = this.actions$.pipe(\r\n    //     ofType(fromSocketActions.SocketActionTypes.GetMessages),\r\n    //     map((action: fromSocketActions.GetMessages) => action.payload),\r\n    //     switchMap((payload) => this.socketService.getMessages({ room_id: payload._id }).pipe(\r\n    //         map((msgs) => new fromSocketActions.GetMessagesSuccess({ msgs })),\r\n    //         catchError((err) => of(new fromSocketActions.SocketError(err))),\r\n    //     )),\r\n    // );\r\n\r\n    @Effect()\r\n    getUserRooms: Observable<Action | Action[]> = this.actions$.pipe(\r\n        ofType(fromSocketActions.SocketActionTypes.GetUserRooms),\r\n        // map((action: fromSocketActions.GetUserRooms) => action.payload),\r\n        switchMap((payload) => this.socketService.getUserRooms().pipe(\r\n            switchMap((userRooms) => [\r\n                new fromSocketActions.GetUserRoomsSuccess({ userRooms }),\r\n                new fromSocketActions.UpdateContacts(),\r\n            ]),\r\n            catchError((err) => of(new fromSocketActions.SocketError(err))),\r\n        )),\r\n    );\r\n\r\n    @Effect()\r\n    getActiveContactMsgs: Observable<Action | Action[]> = this.actions$.pipe(\r\n        ofType(fromSocketActions.SocketActionTypes.GetActiveContactMsgs),\r\n        map((action: fromSocketActions.GetActiveContactMsgs) => action.payload),\r\n        switchMap((payload) => this.socketService.getGetActiveContactMsgs({\r\n            anotherUser_id: payload.activeContact.user_id, room_id: payload.activeContact.room_id,\r\n        }).pipe(\r\n            map((activeContactMsgs) =>\r\n                new fromSocketActions.GetActiveContactMsgsSuccess({ activeContactMsgs }),\r\n            ),\r\n            catchError((err) => of(new fromSocketActions.SocketError(err))),\r\n        )),\r\n    );\r\n\r\n    @Effect()\r\n    activeSockets: Observable<Action | Action[]> = this.actions$.pipe(\r\n        ofType(fromSocketActions.SocketActionTypes.ActiveSockets),\r\n        map((_) => new fromSocketActions.UpdateContacts()),\r\n        catchError((err) => of(new fromSocketActions.SocketError(err))),\r\n    );\r\n\r\n    @Effect()\r\n    updateContacts: Observable<Action | Action[]> = this.actions$.pipe(\r\n        ofType(fromSocketActions.SocketActionTypes.UpdateContacts),\r\n        withLatestFrom(\r\n            this.store$.select(getUserRooms),\r\n            this.store$.select(getActiveSockets)),\r\n        map(([action, userRooms, activeSockets]: [Action, Room[], ActiveSocket[]]): Contact[] => {\r\n            let contacts = userRooms.map((room) => {\r\n                let socket_id = null;\r\n                activeSockets = activeSockets.filter((socket) => {\r\n                    if (socket.user_id === room.anotherUser_id) {\r\n                        socket_id = socket.socket_id;\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                });\r\n\r\n                if (socket_id) {\r\n                    const result = {\r\n                        socket_id,\r\n                        room_id: room._id,\r\n                        user_id: room.anotherUser_id,\r\n                        userName: room.anotherUser.name,\r\n                        userLogin: room.anotherUser.login,\r\n                        userRole: room.anotherUser.role,\r\n                    };\r\n                    socket_id = null;\r\n                    return result;\r\n                }\r\n                const result = {\r\n                    socket_id: null,\r\n                    room_id: room._id,\r\n                    user_id: room.anotherUser_id,\r\n                    userName: room.anotherUser.name,\r\n                    userLogin: room.anotherUser.login,\r\n                    userRole: room.anotherUser.role,\r\n                };\r\n                return result;\r\n            });\r\n            contacts = [...contacts, ...activeSockets.map((socket) => ({ ...socket, room_id: null }))];\r\n            return contacts;\r\n        }),\r\n        map((contacts) => {\r\n            return new fromSocketActions.UpdateContactsSuccess({ contacts });\r\n        }),\r\n        catchError((err) => of(new fromSocketActions.SocketError(err))),\r\n    );\r\n\r\n    @Effect()\r\n    connect: Observable<Action | Action[]> = this.actions$.pipe(\r\n        ofType(fromSocketActions.SocketActionTypes.Connect),\r\n        map((action: fromSocketActions.Connect) => action.payload),\r\n        map((payload) => {\r\n            this.socketService.connect(payload);\r\n            // this.socketService.connect('user');\r\n            return new fromSocketActions.Status('connected');\r\n        }),\r\n        catchError((err) => of(new fromSocketActions.SocketError(err))),\r\n    );\r\n\r\n    @Effect()\r\n    disconnect: Observable<Action | Action[]> = this.actions$.pipe(\r\n        ofType(fromSocketActions.SocketActionTypes.Disconnect),\r\n        map((action: fromSocketActions.Disconnect) => action.payload),\r\n        map((payload) => {\r\n            this.socketService.disconnect(payload);\r\n            // this.socketService.disconnect('user');\r\n            return new fromSocketActions.Status('disconnected');\r\n        }),\r\n        catchError((err) => of(new fromSocketActions.SocketError(err))),\r\n    );\r\n}\r\n","import { UserService } from './../../services/user.service';\r\nimport * as fromUserActions from './../actions/user.actions';\r\nimport * as fromSocketActions from './../actions/socket.actions';\r\nimport { Injectable } from '@angular/core';\r\nimport { Actions, Effect, ofType } from '@ngrx/effects';\r\nimport { Action } from '@ngrx/store';\r\nimport { Observable, of } from 'rxjs';\r\nimport { catchError, map, switchMap } from 'rxjs/operators';\r\n\r\n\r\n@Injectable()\r\nexport class UserEffects {\r\n    @Effect()\r\n    loadUser: Observable<Action | Action[]> = this.actions$.pipe(\r\n        ofType(fromUserActions.UserActionTypes.LoadUser),\r\n        map((action: fromUserActions.LoadUser) => null),\r\n        switchMap((_) => this.userService.loadUser().pipe(\r\n            switchMap((user) => {\r\n                let actions: Action[];\r\n                if (user) {\r\n                    // User logged in\r\n                    actions = [new fromUserActions.Authenticated(user), new fromSocketActions.Connect()];\r\n                    // actions = [new fromUserActions.Authenticated(user), new fromSocketActions.Connect(user.role)];\r\n                } else {\r\n                    // User not logged in\r\n                    actions = [new fromUserActions.NotAuthenticated(), new fromSocketActions.Disconnect()];\r\n                }\r\n                return actions;\r\n            }),\r\n            catchError((err) => [\r\n                new fromUserActions.AuthError(err),\r\n                new fromUserActions.NotAuthenticated(),\r\n                new fromSocketActions.Disconnect(),\r\n            ]),\r\n        )),\r\n    );\r\n\r\n    @Effect()\r\n    logout: Observable<Action | Action[]> = this.actions$.pipe(\r\n        ofType(fromUserActions.UserActionTypes.Logout),\r\n        switchMap(() => this.userService.logout().pipe(\r\n            map((_) => new fromUserActions.Redirection('/')),\r\n            catchError((err) => of(new fromUserActions.AuthError(err))),\r\n        )),\r\n    );\r\n\r\n    @Effect()\r\n    login: Observable<Action | Action[]> = this.actions$.pipe(\r\n        ofType(fromUserActions.UserActionTypes.Login),\r\n        map((action: fromUserActions.Login) => action.payload),\r\n        switchMap((payload) => this.userService.login(payload).pipe(\r\n            map((_) => new fromUserActions.Redirection('/chat')),\r\n            catchError((err) => of(new fromUserActions.AuthError(err))),\r\n        )),\r\n    );\r\n\r\n    @Effect()\r\n    loginAnonymous: Observable<Action | Action[]> = this.actions$.pipe(\r\n        ofType(fromUserActions.UserActionTypes.LoginAnonymous),\r\n        map((action: fromUserActions.Login) => action.payload),\r\n        switchMap((payload) => this.userService.loginAnonymous(payload).pipe(\r\n            map((_) => new fromUserActions.Redirection('/chat')),\r\n            catchError((err) => of(new fromUserActions.AuthError(err))),\r\n        )),\r\n    );\r\n\r\n    @Effect()\r\n    signup: Observable<Action | Action[]> = this.actions$.pipe(\r\n        ofType(fromUserActions.UserActionTypes.Signup),\r\n        map((action: fromUserActions.Signup) => action.payload),\r\n        switchMap((payload) => this.userService.signup(payload).pipe(\r\n            map((_) => new fromUserActions.Redirection('/')),\r\n            catchError((err) => of(new fromUserActions.AuthError(err))),\r\n        )),\r\n    );\r\n\r\n    constructor(\r\n        private actions$: Actions,\r\n        private userService: UserService,\r\n    ) {}\r\n}\r\n","import { Action, createFeatureSelector, createSelector } from '@ngrx/store';\r\n\r\n\r\nexport const appFeatureKey = 'app';\r\n\r\nexport interface State {\r\n  loading: boolean;\r\n\r\n}\r\n\r\nexport const initialState: State = {\r\n  loading: false,\r\n};\r\n\r\nexport function reducer(state = initialState, action: Action): State {\r\n  switch (action.type) {\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst featureSelector = createFeatureSelector<State>(appFeatureKey);\r\n\r\nexport const getLoading = createSelector(featureSelector, (state) => state.loading);\r\n","import { ActionReducerMap, MetaReducer } from '@ngrx/store';\r\n\r\nimport { environment } from '../../../environments/environment';\r\nimport * as fromUser from './user.reducer';\r\nimport * as fromSocket from './socket.reducer';\r\nimport * as fromApp from './app.reducer';\r\n\r\nexport interface State {\r\n    user: fromUser.State;\r\n    socket: fromSocket.State;\r\n    app: fromApp.State;\r\n}\r\n\r\nexport const reducers: ActionReducerMap<State> = {\r\n    user: fromUser.reducer,\r\n    socket: fromSocket.reducer,\r\n    app: fromApp.reducer,\r\n};\r\n\r\nexport const metaReducers: MetaReducer<State>[] = !environment.production ? [] : [];\r\n","import { SocketActions, SocketActionTypes } from '../actions/socket.actions';\r\nimport { createFeatureSelector, createSelector } from '@ngrx/store';\r\nimport { ActiveSocket, Contact, Msg, Room } from 'src/app/interfaces';\r\n\r\nexport const socketFeatureKey = 'socket';\r\n\r\nexport interface State {\r\n    msgs: Msg[],\r\n    userRooms: Room[],\r\n    activeSockets: ActiveSocket[],\r\n    activeContact: Contact | null,\r\n    activeContactMsgs: Msg[],\r\n    contacts: any,\r\n    loading: boolean,\r\n    status: 'connected' | 'disconnected',\r\n}\r\n\r\nexport const initialState: State = {\r\n    msgs: [],\r\n    userRooms: [],\r\n    activeSockets: [],\r\n    activeContact: null,\r\n    activeContactMsgs: [],\r\n    contacts: [],\r\n    loading: false,\r\n    status: 'disconnected',\r\n};\r\n\r\nexport function reducer(state = initialState, action: SocketActions): State {\r\n    switch (action.type) {\r\n        case SocketActionTypes.ActiveSockets:\r\n            return { ...state, activeSockets: [...action.payload.activeSockets]};\r\n        case SocketActionTypes.GetActiveContactMsgs:\r\n            return { ...state, activeContact: action.payload.activeContact };\r\n        case SocketActionTypes.GetActiveContactMsgsSuccess:\r\n            return { ...state, activeContactMsgs: action.payload.activeContactMsgs };\r\n        case SocketActionTypes.GetMessages:\r\n            return { ...state, loading: true };\r\n        case SocketActionTypes.GetMessagesSuccess:\r\n            return { ...state, loading: false, activeContactMsgs: [...state.activeContactMsgs, ...action.payload.msgs]};\r\n        case SocketActionTypes.GetUserRoomsSuccess:\r\n            return { ...state, userRooms: action.payload.userRooms };\r\n        case SocketActionTypes.UpdateContactsSuccess:\r\n            return { ...state, contacts: action.payload.contacts };\r\n        case SocketActionTypes.Status:\r\n            return { ...state, status: action.payload };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst featureSelector = createFeatureSelector<State>(socketFeatureKey);\r\nexport const getMsgs = createSelector(featureSelector, (state) => state.msgs);\r\nexport const getUserRooms = createSelector(featureSelector, (state) => state.userRooms);\r\nexport const getActiveSockets = createSelector(featureSelector, (state) => state.activeSockets);\r\nexport const getContacts = createSelector(featureSelector, (state) => state.contacts);\r\nexport const getActiveContact = createSelector(featureSelector, (state) => state.activeContact);\r\nexport const getActiveContactMsgs = createSelector(featureSelector, (state) => state.activeContactMsgs);\r\nexport const getStatus = createSelector(featureSelector, (state) => state.status);\r\n","import { LoadUser } from './../actions/user.actions';\r\nimport { User } from './../../interfaces';\r\nimport { createFeatureSelector, createSelector } from '@ngrx/store';\r\nimport { UserActions, UserActionTypes } from '../actions/user.actions';\r\n\r\nexport const userFeatureKey = 'user';\r\n\r\nexport interface State {\r\n    user: User | null;\r\n    loading: boolean;\r\n    redirectionUrl: string | null;\r\n}\r\n\r\nexport const initialState: State = {\r\n    user: null,\r\n    loading: false,\r\n    redirectionUrl: null,\r\n};\r\n\r\nexport function reducer(state = initialState, action: UserActions): State {\r\n    switch (action.type) {\r\n        case UserActionTypes.LoadUser:\r\n            return { ...state, loading: true };\r\n\r\n        case UserActionTypes.Authenticated:\r\n            return { ...state, user: { ...action.payload }, loading: false };\r\n\r\n        case UserActionTypes.NotAuthenticated:\r\n            return { ...state, user: initialState.user, loading: false };\r\n\r\n        case UserActionTypes.Redirection:\r\n            return { ...state, redirectionUrl: action.payload };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst featureSelector = createFeatureSelector<State>(userFeatureKey);\r\n\r\nexport const getUser = createSelector(featureSelector, (state) => state.user);\r\nexport const redirectionUrl = createSelector(featureSelector, (state) => state.redirectionUrl);\r\n","import { StoreDevtoolsModule } from '@ngrx/store-devtools';\r\nimport { NgModule } from '@angular/core';\r\nimport { environment } from '../../environments/environment';\r\nimport { StoreModule } from '@ngrx/store';\r\nimport { reducers, metaReducers } from './reducers';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { UserEffects } from './effects/user.effects';\r\nimport { SocketEffects } from './effects/socket.effects';\r\n\r\n\r\n@NgModule({\r\n    declarations: [],\r\n    imports: [\r\n        StoreModule.forRoot(reducers, {\r\n            metaReducers,\r\n            runtimeChecks: {\r\n                strictStateImmutability: true,\r\n                strictActionImmutability: true,\r\n            },\r\n        }),\r\n        StoreDevtoolsModule.instrument({ maxAge: 25, logOnly: environment.production }),\r\n        EffectsModule.forRoot([UserEffects, SocketEffects]),\r\n    ],\r\n})\r\n\r\nexport class AppStoreModule { }\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n    production: false,\r\n    nsp: {\r\n        user: { url: '/user', options: {} },\r\n        guest: { url: '/guest', options: {} },\r\n    },\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"sourceRoot":"webpack:///"}